<!DOCTYPE html>
<!-- saved from url=(0113)https://basescan.org/writecontract/index?m=dim&v=21.10.1.1&a=0x699727f9e01a822efdcf7333073f0461e5914b4e&n=base&p= -->
<html id="html" xmlns="http://www.w3.org/1999/xhtml" data-bs-theme="dim"><head><meta http-equiv="Content-Type" content="text/html; charset=UTF-8">
    
    <meta name="fortmatic-site-verification" content="q6QiF6hQJIdeCSLw">
    <meta name="viewport" content="width=device-width, initial-scale=1.0">
    <meta name="format-detection" content="telephone=no">
    <link rel="stylesheet" href="./bootstrap(1).css">
    <link rel="stylesheet" href="./all(1).css">
    <link rel="stylesheet" href="./theme.min.css">
    <link rel="stylesheet" href="./base.min.css">
    <link rel="shortcut icon" href="https://basescan.org/assets/base/images/favicon.ico">
    <style type="text/css">
        html {
            font-size: 13px;
        }

        body {
            font-family: Helvetica Neue,Helvetica,Arial,sans-serif;
        }

        /*a {
            color: #7342DC;
        }

            a:hover {
                color: #6f3cc3;
            }*/        

        .text-primary {
            color: #7342DC !important;
        }

        .btn-link:hover {
            color: #6f3cc3;
            text-decoration: none;
        }

        .card-btn-arrow {
            display: inline-block;
            color: #7342DC;
            margin-top: 5px;
        }

        #overlay {
            /*background: #ffffff;*/
            background: rgba(255,255,255,.7);
            color: #666666;
            position: fixed;
            height: 100%;
            width: 100%;
            z-index: 5000;
            top: 0;
            left: 0;
            float: left;
            text-align: center;
            padding-top: 10%;
            display: none;
        }

        .accordion-arrow {
            display: inline-block;
            transition: 0.3s ease-in-out;
        }

        .collapsed .accordion-arrow {
            transform: rotate(-90deg);
        }

        body.dark-mode {
            color: #a2b9c8;
            background-color: #112641 !important;
        }

            body.dark-mode .bg-light {
                background-color: #01263f !important
            }

            body.dark-mode .text-secondary {
                color: #7295ac !important
            }


            body.dark-mode .border, body.dark-mode .border-bottom, body.dark-mode .border-top, body.dark-mode .u-ver-divider--left:after, body.dark-mode .u-ver-divider:after {
                border-color: #013558 !important
            }

            body.dark-mode p {
                color: #a2b9c8
            }

            body.dark-mode .modal-footer, body.dark-mode .modal-header {
                border-color: #013558
            }

            body.dark-mode .card {
                border-color: transparent;
                background-color: #012137 !important;
                box-shadow: 0 .5rem 1.2rem rgba(4,76,124,.2)
            }

            body.dark-mode .card-header {
                background-color: #012137 !important;
                border-color: #013558
            }

            body.dark-mode .card-header-title {
                color: #a2b9c8
            }

            body.dark-mode .card-btn {
                color: #a2b9c8
            }

            body.dark-mode .form-control::-webkit-input-placeholder {
                color: #577c93
            }

            body.dark-mode .form-control::-moz-placeholder {
                color: #577c93
            }

            body.dark-mode .form-control::-ms-input-placeholder {
                color: #577c93
            }

            body.dark-mode .form-control::placeholder {
                color: #577c93
            }

            body.dark-mode .link-hover-secondary, body.dark-mode .text-dark, body.dark-mode .text-link, body.dark-mode .text-muted, body.dark-mode .text-white {
                color: #a2b9c8 !important
            }

            body.dark-mode .custom-select, body.dark-mode .form-control, body.dark-mode .input-group-text {
                color: #a2b9c8 !important;
                border-color: #013558 !important;
                background-color: #01263f !important
            }

            body.dark-mode .btn-primary, body.dark-mode .btn-primary:not([href]), body.dark-mode .btn-primary:not([href]):not([href]):not(:disabled):not(.disabled) {
                color: rgba(255, 255, 255, 0.8);
                background-color: rgba(52, 152, 219, 0.2);
                border-color: rgba(52, 152, 219, 0.2);
            }

                body.dark-mode .btn-primary:focus, body.dark-mode .btn-primary:hover, body.dark-mode .btn-primary:not([href]):focus, body.dark-mode .btn-primary:not([href]):hover, body.dark-mode .btn-primary:not([href]):not([href]):not(:disabled):not(.disabled):focus, body.dark-mode .btn-primary:not([href]):not([href]):not(:disabled):not(.disabled):hover {
                    color: white;
                    background-color: #7342DC;
                }

            body.dark-mode .alert-secondary {
                color: #c0d3df !important;
                background-color: #132a47 !important;
                border-color: #18365b !important;
            }

        .badge-red {
            background: #e74c3c;
        }

        .badge-green {
            background: rgb(0,128,0);
        }

        .walletconnect-modal__base {
            top: 53% !important;
        }

        body.dark-mode .close {
            color: rgba(192, 211, 223, 0.7);
            text-shadow: none;
        }

            body.dark-mode .close:hover {
                color: #c0d3df !important;
            }

        body.dark-mode .modal-content {
            background-color: #132a47;
        }

        body.dark-mode .modal-header,
        body.dark-mode .modal-footer {
            border-color: #18365b;
        }

        /* Custom Button (Wallet) */
        .btn-custom-wallet {
            padding-top: 0.75rem;
            padding-bottom: 0.75rem;
            border: 1px solid #d5dae2;
        }

            .btn-custom-wallet:hover {
                color: #7342DC;
                border-color: #7342DC;
            }
        /* Custom Badge (Wallet) */
        .badge-custom-wallet {
            padding: 0.5rem 0.75rem;
            border-radius: 5rem;
            font-size: 10px;
        }

        .permalink_text {
            position: absolute;
            top: 5px;
            right: 29px;
            color: #fff;
            /* background-color: #e9e9e9;
            border-color: #d1d1d1;*/
        }

         .copy-button-position {
            position: absolute;
            top: 5px;
            right: 58px;
        }

        body.dark-mode .permalink_text {
            /*background-color: #003152;
            border-color: #012137;*/
        }

        .badge-soft-secondary {
            color: #77838f;
            background-color: rgba(119,131,143,.1);
        }

        .blink-container {
            width: 100%;
        }

        .blinking-bg {
            border-width: 1px;
            border-style: solid;
            /*border-color: #007bff !important;*/
            border-color: #ffc107 !important;
            border-radius: 0.25rem;
        }

        .border-primary_r {
            border-color: #007bff;
        }

        /* Custom Tooltip */
        [data-bs-theme=light] .custom-tooltip {
            --bs-tooltip-bg: #19293D;
        }
        [data-bs-theme=dim] .custom-tooltip {
            --bs-tooltip-bg: #606165;
        }
        [data-bs-theme=dark] .custom-tooltip {
            --bs-tooltip-bg: #313131;
        }
    </style>
</head>
<body>

    <!-- Spinner --><div id="overlay" class="text-center py-10 "><div class="spinner-border text-primary" role="status"><span class="visually-hidden">Loading...</span></div><div class="small text-muted mt-1">Loading</div></div><!-- End Spinner -->
    <div id="header">
    <div class="d-flex flex-wrap justify-content-between align-items-center gap-2 mb-3"><p class="mb-0"><button type="button" class="btn btn-white focus-shadow-0" id="connectStatus" onclick="openModal(); return false;"><i id="connector" class="fa fa-circle text-danger me-1"></i>Connect to Web3</button></p><span><a href="https://basescan.org/writecontract/index?m=dim&amp;v=21.10.1.1&amp;a=0x699727f9e01a822efdcf7333073f0461e5914b4e&amp;n=base&amp;p=#" class="link-dark me-1 expandCollapseAllButton" onclick="expandCollapseAll()">[Expand all]</a><a class="link-dark ms-3 me-3" href="https://basescan.org/writecontract/index?m=dim&amp;v=21.10.1.1&amp;a=0x699727f9e01a822efdcf7333073f0461e5914b4e&amp;n=base&amp;p=#" onclick="resetPage(); return false;">[Reset]</a></span></div><div class="alert alert-dark">
                                   <p class="mb-0 alert-text"><i class="far fa-info-circle"></i> Descriptions included below are taken from the contract source code <a href="https://docs.soliditylang.org/en/v0.8.11/natspec-format.html" target="_blank">NatSpec</a>. BaseScan does not provide any guarantees on their safety or accuracy.</p>
                                   </div></div>
    <div class="card shadow-none mb-3"><div class="card-header bg-light card-collapse p-0" role="tab" id="heading1" style="position: relative;"><a role="button" class="btn btn-link btn-block link-dark text-decoration-none d-flex justify-content-between align-items-center text-start py-2 collapsed" data-bs-toggle="collapse" data-bs-parent="#accordion" href="https://basescan.org/writecontract/index?m=dim&amp;v=21.10.1.1&amp;a=0x699727f9e01a822efdcf7333073f0461e5914b4e&amp;n=base&amp;p=#collapse1" aria-expanded="true" aria-controls="collapse1">1. approve (0x095ea7b3)<span class="accordion-arrow"><i class="fas fa-arrow-down small"></i></span></a><a class="btn btn-sm btn-icon me-1 permalink_text link-dark" href="javascript:;" onclick="generatePermalink(this, 1)" data-bs-toggle="tooltip" data-bs-placement="top" title="Copy Permalink"><i class="far fa-link btn-icon__inner"></i></a><a class="btn btn-sm btn-icon me-1 copy-button-position link-dark" href="javascript:;" onclick="generateMethodId(this, &#39;approve (0x095ea7b3)&#39;)" data-bs-toggle="tooltip" data-bs-placement="top" title="Copy Method Name"><i class="far fa-copy fa-fw"></i></a></div><div id="collapse1" class="collapse writeContractFunction" role="tabpanel" aria-labelledby="heading1"><div class="card-body"><p class="text-muted font-italic fs-sm">See {IERC721-approve}.</p><form> <div class="form-group"><label>to (address) </label><input type="text" class="form-control form-control-xs" name="input_1" id="input_1_1" data-bs-type="address" placeholder="  to (address)"></div> <div class="form-group"><label>tokenId (uint256) </label><button type="button" class="btn btn-sm btn-secondary ms-2 mb-2" id="btnConvert_1_2" data-bs-toggle="modal" data-bs-target="#myModalConvert" onclick="clearPopup(this);" title="Add Zeroes"><i class="fas fa-plus"></i></button><input type="text" class="form-control form-control-xs" name="input_1" id="input_1_2" data-bs-type="uint256" placeholder="  tokenId (uint256)"></div><button type="button" class="write-btn btn btn-primary border disabled" onclick="write0(&#39;approve(address,uint256)&#39;, &#39;input_1&#39;);">Write</button> <div style="display:inline" class="write-msg text-success input_1"></div></form></div></div></div><div class="card shadow-none mb-3"><div class="card-header bg-light card-collapse p-0" role="tab" id="heading2" style="position: relative;"><a role="button" class="btn btn-link btn-block link-dark text-decoration-none d-flex justify-content-between align-items-center text-start py-2 collapsed" data-bs-toggle="collapse" data-bs-parent="#accordion" href="https://basescan.org/writecontract/index?m=dim&amp;v=21.10.1.1&amp;a=0x699727f9e01a822efdcf7333073f0461e5914b4e&amp;n=base&amp;p=#collapse2" aria-expanded="true" aria-controls="collapse2">2. mint (0x785cc997)<span class="accordion-arrow"><i class="fas fa-arrow-down small"></i></span></a><a class="btn btn-sm btn-icon me-1 permalink_text link-dark" href="javascript:;" onclick="generatePermalink(this, 2)" data-bs-toggle="tooltip" data-bs-placement="top" title="Copy Permalink"><i class="far fa-link btn-icon__inner"></i></a><a class="btn btn-sm btn-icon me-1 copy-button-position link-dark" href="javascript:;" onclick="generateMethodId(this, &#39;mint (0x785cc997)&#39;)" data-bs-toggle="tooltip" data-bs-placement="top" title="Copy Method Name"><i class="far fa-copy fa-fw"></i></a></div><div id="collapse2" class="collapse writeContractFunction" role="tabpanel" aria-labelledby="heading2"><div class="card-body"><form> <div class="form-group"><label>mint </label><input type="text" class="form-control form-control-xs" id="input_payable_2_mint" name="payable_mint" placeholder="  payableAmount (ether)"></div> <div class="form-group"><label>inputFid (uint256) </label><button type="button" class="btn btn-sm btn-secondary ms-2 mb-2" id="btnConvert_2_1" data-bs-toggle="modal" data-bs-target="#myModalConvert" onclick="clearPopup(this);" title="Add Zeroes"><i class="fas fa-plus"></i></button><input type="text" class="form-control form-control-xs" name="input_2" id="input_2_1" data-bs-type="uint256" placeholder="  inputFid (uint256)"></div> <div class="form-group"><label>url (string) </label><input type="text" class="form-control form-control-xs" name="input_2" id="input_2_2" data-bs-type="string" placeholder="  url (string)"></div> <div class="form-group"><label>signature (bytes) </label><input type="text" class="form-control form-control-xs" name="input_2" id="input_2_3" data-bs-type="bytes" placeholder="  signature (bytes)"></div><button type="button" class="write-btn btn btn-primary border disabled" onclick="write0(&#39;mint(uint256,string,bytes)&#39;, &#39;input_2&#39;);">Write</button> <div style="display:inline" class="write-msg text-success input_2"></div></form></div></div></div><div class="card shadow-none mb-3"><div class="card-header bg-light card-collapse p-0" role="tab" id="heading3" style="position: relative;"><a role="button" class="btn btn-link btn-block link-dark text-decoration-none d-flex justify-content-between align-items-center text-start py-2 collapsed" data-bs-toggle="collapse" data-bs-parent="#accordion" href="https://basescan.org/writecontract/index?m=dim&amp;v=21.10.1.1&amp;a=0x699727f9e01a822efdcf7333073f0461e5914b4e&amp;n=base&amp;p=#collapse3" aria-expanded="true" aria-controls="collapse3">3. renounceOwnership (0x715018a6)<span class="accordion-arrow"><i class="fas fa-arrow-down small"></i></span></a><a class="btn btn-sm btn-icon me-1 permalink_text link-dark" href="javascript:;" onclick="generatePermalink(this, 3)" data-bs-toggle="tooltip" data-bs-placement="top" title="Copy Permalink"><i class="far fa-link btn-icon__inner"></i></a><a class="btn btn-sm btn-icon me-1 copy-button-position link-dark" href="javascript:;" onclick="generateMethodId(this, &#39;renounceOwnership (0x715018a6)&#39;)" data-bs-toggle="tooltip" data-bs-placement="top" title="Copy Method Name"><i class="far fa-copy fa-fw"></i></a></div><div id="collapse3" class="collapse writeContractFunction" role="tabpanel" aria-labelledby="heading3"><div class="card-body"><p class="text-muted font-italic fs-sm">Leaves the contract without owner. It will not be possible to call `onlyOwner` functions. Can only be called by the current owner. NOTE: Renouncing ownership will leave the contract without an owner, thereby disabling any functionality that is only available to the owner.</p><form><button type="button" class="write-btn btn btn-primary border disabled" onclick="write0(&#39;renounceOwnership()&#39;, &#39;input_3&#39;);">Write</button> <div style="display:inline" class="write-msg text-success input_3"></div></form></div></div></div><div class="card shadow-none mb-3"><div class="card-header bg-light card-collapse p-0" role="tab" id="heading4" style="position: relative;"><a role="button" class="btn btn-link btn-block link-dark text-decoration-none d-flex justify-content-between align-items-center text-start py-2 collapsed" data-bs-toggle="collapse" data-bs-parent="#accordion" href="https://basescan.org/writecontract/index?m=dim&amp;v=21.10.1.1&amp;a=0x699727f9e01a822efdcf7333073f0461e5914b4e&amp;n=base&amp;p=#collapse4" aria-expanded="true" aria-controls="collapse4">4. safeTransferFrom (0x42842e0e)<span class="accordion-arrow"><i class="fas fa-arrow-down small"></i></span></a><a class="btn btn-sm btn-icon me-1 permalink_text link-dark" href="javascript:;" onclick="generatePermalink(this, 4)" data-bs-toggle="tooltip" data-bs-placement="top" title="Copy Permalink"><i class="far fa-link btn-icon__inner"></i></a><a class="btn btn-sm btn-icon me-1 copy-button-position link-dark" href="javascript:;" onclick="generateMethodId(this, &#39;safeTransferFrom (0x42842e0e)&#39;)" data-bs-toggle="tooltip" data-bs-placement="top" title="Copy Method Name"><i class="far fa-copy fa-fw"></i></a></div><div id="collapse4" class="collapse writeContractFunction" role="tabpanel" aria-labelledby="heading4"><div class="card-body"><p class="text-muted font-italic fs-sm">See {IERC721-safeTransferFrom}.</p><form> <div class="form-group"><label>from (address) </label><input type="text" class="form-control form-control-xs" name="input_4" id="input_4_1" data-bs-type="address" placeholder="  from (address)"></div> <div class="form-group"><label>to (address) </label><input type="text" class="form-control form-control-xs" name="input_4" id="input_4_2" data-bs-type="address" placeholder="  to (address)"></div> <div class="form-group"><label>tokenId (uint256) </label><button type="button" class="btn btn-sm btn-secondary ms-2 mb-2" id="btnConvert_4_3" data-bs-toggle="modal" data-bs-target="#myModalConvert" onclick="clearPopup(this);" title="Add Zeroes"><i class="fas fa-plus"></i></button><input type="text" class="form-control form-control-xs" name="input_4" id="input_4_3" data-bs-type="uint256" placeholder="  tokenId (uint256)"></div><button type="button" class="write-btn btn btn-primary border disabled" onclick="write0(&#39;safeTransferFrom(address,address,uint256)&#39;, &#39;input_4&#39;);">Write</button> <div style="display:inline" class="write-msg text-success input_4"></div></form></div></div></div><div class="card shadow-none mb-3"><div class="card-header bg-light card-collapse p-0" role="tab" id="heading5" style="position: relative;"><a role="button" class="btn btn-link btn-block link-dark text-decoration-none d-flex justify-content-between align-items-center text-start py-2 collapsed" data-bs-toggle="collapse" data-bs-parent="#accordion" href="https://basescan.org/writecontract/index?m=dim&amp;v=21.10.1.1&amp;a=0x699727f9e01a822efdcf7333073f0461e5914b4e&amp;n=base&amp;p=#collapse5" aria-expanded="true" aria-controls="collapse5">5. safeTransferFrom (0xb88d4fde)<span class="accordion-arrow"><i class="fas fa-arrow-down small"></i></span></a><a class="btn btn-sm btn-icon me-1 permalink_text link-dark" href="javascript:;" onclick="generatePermalink(this, 5)" data-bs-toggle="tooltip" data-bs-placement="top" title="Copy Permalink"><i class="far fa-link btn-icon__inner"></i></a><a class="btn btn-sm btn-icon me-1 copy-button-position link-dark" href="javascript:;" onclick="generateMethodId(this, &#39;safeTransferFrom (0xb88d4fde)&#39;)" data-bs-toggle="tooltip" data-bs-placement="top" title="Copy Method Name"><i class="far fa-copy fa-fw"></i></a></div><div id="collapse5" class="collapse writeContractFunction" role="tabpanel" aria-labelledby="heading5"><div class="card-body"><p class="text-muted font-italic fs-sm">See {IERC721-safeTransferFrom}.</p><form> <div class="form-group"><label>from (address) </label><input type="text" class="form-control form-control-xs" name="input_5" id="input_5_1" data-bs-type="address" placeholder="  from (address)"></div> <div class="form-group"><label>to (address) </label><input type="text" class="form-control form-control-xs" name="input_5" id="input_5_2" data-bs-type="address" placeholder="  to (address)"></div> <div class="form-group"><label>tokenId (uint256) </label><button type="button" class="btn btn-sm btn-secondary ms-2 mb-2" id="btnConvert_5_3" data-bs-toggle="modal" data-bs-target="#myModalConvert" onclick="clearPopup(this);" title="Add Zeroes"><i class="fas fa-plus"></i></button><input type="text" class="form-control form-control-xs" name="input_5" id="input_5_3" data-bs-type="uint256" placeholder="  tokenId (uint256)"></div> <div class="form-group"><label>data (bytes) </label><input type="text" class="form-control form-control-xs" name="input_5" id="input_5_4" data-bs-type="bytes" placeholder="  data (bytes)"></div><button type="button" class="write-btn btn btn-primary border disabled" onclick="write0(&#39;safeTransferFrom(address,address,uint256,bytes)&#39;, &#39;input_5&#39;);">Write</button> <div style="display:inline" class="write-msg text-success input_5"></div></form></div></div></div><div class="card shadow-none mb-3"><div class="card-header bg-light card-collapse p-0" role="tab" id="heading6" style="position: relative;"><a role="button" class="btn btn-link btn-block link-dark text-decoration-none d-flex justify-content-between align-items-center text-start py-2 collapsed" data-bs-toggle="collapse" data-bs-parent="#accordion" href="https://basescan.org/writecontract/index?m=dim&amp;v=21.10.1.1&amp;a=0x699727f9e01a822efdcf7333073f0461e5914b4e&amp;n=base&amp;p=#collapse6" aria-expanded="true" aria-controls="collapse6">6. setApprovalForAll (0xa22cb465)<span class="accordion-arrow"><i class="fas fa-arrow-down small"></i></span></a><a class="btn btn-sm btn-icon me-1 permalink_text link-dark" href="javascript:;" onclick="generatePermalink(this, 6)" data-bs-toggle="tooltip" data-bs-placement="top" title="Copy Permalink"><i class="far fa-link btn-icon__inner"></i></a><a class="btn btn-sm btn-icon me-1 copy-button-position link-dark" href="javascript:;" onclick="generateMethodId(this, &#39;setApprovalForAll (0xa22cb465)&#39;)" data-bs-toggle="tooltip" data-bs-placement="top" title="Copy Method Name"><i class="far fa-copy fa-fw"></i></a></div><div id="collapse6" class="collapse writeContractFunction" role="tabpanel" aria-labelledby="heading6"><div class="card-body"><p class="text-muted font-italic fs-sm">See {IERC721-setApprovalForAll}.</p><form> <div class="form-group"><label>operator (address) </label><input type="text" class="form-control form-control-xs" name="input_6" id="input_6_1" data-bs-type="address" placeholder="  operator (address)"></div> <div class="form-group"><label>approved (bool) </label><input type="text" class="form-control form-control-xs" name="input_6" id="input_6_2" data-bs-type="bool" placeholder="  approved (bool)"></div><button type="button" class="write-btn btn btn-primary border disabled" onclick="write0(&#39;setApprovalForAll(address,bool)&#39;, &#39;input_6&#39;);">Write</button> <div style="display:inline" class="write-msg text-success input_6"></div></form></div></div></div><div class="card shadow-none mb-3"><div class="card-header bg-light card-collapse p-0" role="tab" id="heading7" style="position: relative;"><a role="button" class="btn btn-link btn-block link-dark text-decoration-none d-flex justify-content-between align-items-center text-start py-2 collapsed" data-bs-toggle="collapse" data-bs-parent="#accordion" href="https://basescan.org/writecontract/index?m=dim&amp;v=21.10.1.1&amp;a=0x699727f9e01a822efdcf7333073f0461e5914b4e&amp;n=base&amp;p=#collapse7" aria-expanded="true" aria-controls="collapse7">7. setBurnAmount (0xcc43f3d3)<span class="accordion-arrow"><i class="fas fa-arrow-down small"></i></span></a><a class="btn btn-sm btn-icon me-1 permalink_text link-dark" href="javascript:;" onclick="generatePermalink(this, 7)" data-bs-toggle="tooltip" data-bs-placement="top" title="Copy Permalink"><i class="far fa-link btn-icon__inner"></i></a><a class="btn btn-sm btn-icon me-1 copy-button-position link-dark" href="javascript:;" onclick="generateMethodId(this, &#39;setBurnAmount (0xcc43f3d3)&#39;)" data-bs-toggle="tooltip" data-bs-placement="top" title="Copy Method Name"><i class="far fa-copy fa-fw"></i></a></div><div id="collapse7" class="collapse writeContractFunction" role="tabpanel" aria-labelledby="heading7"><div class="card-body"><form> <div class="form-group"><label>_burnAmount (uint256) </label><button type="button" class="btn btn-sm btn-secondary ms-2 mb-2" id="btnConvert_7_1" data-bs-toggle="modal" data-bs-target="#myModalConvert" onclick="clearPopup(this);" title="Add Zeroes"><i class="fas fa-plus"></i></button><input type="text" class="form-control form-control-xs" name="input_7" id="input_7_1" data-bs-type="uint256" placeholder="  _burnAmount (uint256)"></div><button type="button" class="write-btn btn btn-primary border disabled" onclick="write0(&#39;setBurnAmount(uint256)&#39;, &#39;input_7&#39;);">Write</button> <div style="display:inline" class="write-msg text-success input_7"></div></form></div></div></div><div class="card shadow-none mb-3"><div class="card-header bg-light card-collapse p-0" role="tab" id="heading8" style="position: relative;"><a role="button" class="btn btn-link btn-block link-dark text-decoration-none d-flex justify-content-between align-items-center text-start py-2 collapsed" data-bs-toggle="collapse" data-bs-parent="#accordion" href="https://basescan.org/writecontract/index?m=dim&amp;v=21.10.1.1&amp;a=0x699727f9e01a822efdcf7333073f0461e5914b4e&amp;n=base&amp;p=#collapse8" aria-expanded="true" aria-controls="collapse8">8. setBurnToken (0xc3587980)<span class="accordion-arrow"><i class="fas fa-arrow-down small"></i></span></a><a class="btn btn-sm btn-icon me-1 permalink_text link-dark" href="javascript:;" onclick="generatePermalink(this, 8)" data-bs-toggle="tooltip" data-bs-placement="top" title="Copy Permalink"><i class="far fa-link btn-icon__inner"></i></a><a class="btn btn-sm btn-icon me-1 copy-button-position link-dark" href="javascript:;" onclick="generateMethodId(this, &#39;setBurnToken (0xc3587980)&#39;)" data-bs-toggle="tooltip" data-bs-placement="top" title="Copy Method Name"><i class="far fa-copy fa-fw"></i></a></div><div id="collapse8" class="collapse writeContractFunction" role="tabpanel" aria-labelledby="heading8"><div class="card-body"><form> <div class="form-group"><label>_burnToken (address) </label><input type="text" class="form-control form-control-xs" name="input_8" id="input_8_1" data-bs-type="address" placeholder="  _burnToken (address)"></div><button type="button" class="write-btn btn btn-primary border disabled" onclick="write0(&#39;setBurnToken(address)&#39;, &#39;input_8&#39;);">Write</button> <div style="display:inline" class="write-msg text-success input_8"></div></form></div></div></div><div class="card shadow-none mb-3"><div class="card-header bg-light card-collapse p-0" role="tab" id="heading9" style="position: relative;"><a role="button" class="btn btn-link btn-block link-dark text-decoration-none d-flex justify-content-between align-items-center text-start py-2 collapsed" data-bs-toggle="collapse" data-bs-parent="#accordion" href="https://basescan.org/writecontract/index?m=dim&amp;v=21.10.1.1&amp;a=0x699727f9e01a822efdcf7333073f0461e5914b4e&amp;n=base&amp;p=#collapse9" aria-expanded="true" aria-controls="collapse9">9. setMintPrice (0xf4a0a528)<span class="accordion-arrow"><i class="fas fa-arrow-down small"></i></span></a><a class="btn btn-sm btn-icon me-1 permalink_text link-dark" href="javascript:;" onclick="generatePermalink(this, 9)" data-bs-toggle="tooltip" data-bs-placement="top" title="Copy Permalink"><i class="far fa-link btn-icon__inner"></i></a><a class="btn btn-sm btn-icon me-1 copy-button-position link-dark" href="javascript:;" onclick="generateMethodId(this, &#39;setMintPrice (0xf4a0a528)&#39;)" data-bs-toggle="tooltip" data-bs-placement="top" title="Copy Method Name"><i class="far fa-copy fa-fw"></i></a></div><div id="collapse9" class="collapse writeContractFunction" role="tabpanel" aria-labelledby="heading9"><div class="card-body"><form> <div class="form-group"><label>_mintPrice (uint256) </label><button type="button" class="btn btn-sm btn-secondary ms-2 mb-2" id="btnConvert_9_1" data-bs-toggle="modal" data-bs-target="#myModalConvert" onclick="clearPopup(this);" title="Add Zeroes"><i class="fas fa-plus"></i></button><input type="text" class="form-control form-control-xs" name="input_9" id="input_9_1" data-bs-type="uint256" placeholder="  _mintPrice (uint256)"></div><button type="button" class="write-btn btn btn-primary border disabled" onclick="write0(&#39;setMintPrice(uint256)&#39;, &#39;input_9&#39;);">Write</button> <div style="display:inline" class="write-msg text-success input_9"></div></form></div></div></div><div class="card shadow-none mb-3"><div class="card-header bg-light card-collapse p-0" role="tab" id="heading10" style="position: relative;"><a role="button" class="btn btn-link btn-block link-dark text-decoration-none d-flex justify-content-between align-items-center text-start py-2 collapsed" data-bs-toggle="collapse" data-bs-parent="#accordion" href="https://basescan.org/writecontract/index?m=dim&amp;v=21.10.1.1&amp;a=0x699727f9e01a822efdcf7333073f0461e5914b4e&amp;n=base&amp;p=#collapse10" aria-expanded="true" aria-controls="collapse10">10. setPaused (0x16c38b3c)<span class="accordion-arrow"><i class="fas fa-arrow-down small"></i></span></a><a class="btn btn-sm btn-icon me-1 permalink_text link-dark" href="javascript:;" onclick="generatePermalink(this, 10)" data-bs-toggle="tooltip" data-bs-placement="top" title="Copy Permalink"><i class="far fa-link btn-icon__inner"></i></a><a class="btn btn-sm btn-icon me-1 copy-button-position link-dark" href="javascript:;" onclick="generateMethodId(this, &#39;setPaused (0x16c38b3c)&#39;)" data-bs-toggle="tooltip" data-bs-placement="top" title="Copy Method Name"><i class="far fa-copy fa-fw"></i></a></div><div id="collapse10" class="collapse writeContractFunction" role="tabpanel" aria-labelledby="heading10"><div class="card-body"><form> <div class="form-group"><label>_paused (bool) </label><input type="text" class="form-control form-control-xs" name="input_10" id="input_10_1" data-bs-type="bool" placeholder="  _paused (bool)"></div><button type="button" class="write-btn btn btn-primary border disabled" onclick="write0(&#39;setPaused(bool)&#39;, &#39;input_10&#39;);">Write</button> <div style="display:inline" class="write-msg text-success input_10"></div></form></div></div></div><div class="card shadow-none mb-3"><div class="card-header bg-light card-collapse p-0" role="tab" id="heading11" style="position: relative;"><a role="button" class="btn btn-link btn-block link-dark text-decoration-none d-flex justify-content-between align-items-center text-start py-2 collapsed" data-bs-toggle="collapse" data-bs-parent="#accordion" href="https://basescan.org/writecontract/index?m=dim&amp;v=21.10.1.1&amp;a=0x699727f9e01a822efdcf7333073f0461e5914b4e&amp;n=base&amp;p=#collapse11" aria-expanded="true" aria-controls="collapse11">11. setVerifierAddress (0x17e95526)<span class="accordion-arrow"><i class="fas fa-arrow-down small"></i></span></a><a class="btn btn-sm btn-icon me-1 permalink_text link-dark" href="javascript:;" onclick="generatePermalink(this, 11)" data-bs-toggle="tooltip" data-bs-placement="top" title="Copy Permalink"><i class="far fa-link btn-icon__inner"></i></a><a class="btn btn-sm btn-icon me-1 copy-button-position link-dark" href="javascript:;" onclick="generateMethodId(this, &#39;setVerifierAddress (0x17e95526)&#39;)" data-bs-toggle="tooltip" data-bs-placement="top" title="Copy Method Name"><i class="far fa-copy fa-fw"></i></a></div><div id="collapse11" class="collapse writeContractFunction" role="tabpanel" aria-labelledby="heading11"><div class="card-body"><form> <div class="form-group"><label>_verifierAddress (address) </label><input type="text" class="form-control form-control-xs" name="input_11" id="input_11_1" data-bs-type="address" placeholder="  _verifierAddress (address)"></div><button type="button" class="write-btn btn btn-primary border disabled" onclick="write0(&#39;setVerifierAddress(address)&#39;, &#39;input_11&#39;);">Write</button> <div style="display:inline" class="write-msg text-success input_11"></div></form></div></div></div><div class="card shadow-none mb-3"><div class="card-header bg-light card-collapse p-0" role="tab" id="heading12" style="position: relative;"><a role="button" class="btn btn-link btn-block link-dark text-decoration-none d-flex justify-content-between align-items-center text-start py-2 collapsed" data-bs-toggle="collapse" data-bs-parent="#accordion" href="https://basescan.org/writecontract/index?m=dim&amp;v=21.10.1.1&amp;a=0x699727f9e01a822efdcf7333073f0461e5914b4e&amp;n=base&amp;p=#collapse12" aria-expanded="true" aria-controls="collapse12">12. transferFrom (0x23b872dd)<span class="accordion-arrow"><i class="fas fa-arrow-down small"></i></span></a><a class="btn btn-sm btn-icon me-1 permalink_text link-dark" href="javascript:;" onclick="generatePermalink(this, 12)" data-bs-toggle="tooltip" data-bs-placement="top" title="Copy Permalink"><i class="far fa-link btn-icon__inner"></i></a><a class="btn btn-sm btn-icon me-1 copy-button-position link-dark" href="javascript:;" onclick="generateMethodId(this, &#39;transferFrom (0x23b872dd)&#39;)" data-bs-toggle="tooltip" data-bs-placement="top" title="Copy Method Name"><i class="far fa-copy fa-fw"></i></a></div><div id="collapse12" class="collapse writeContractFunction" role="tabpanel" aria-labelledby="heading12"><div class="card-body"><p class="text-muted font-italic fs-sm">See {IERC721-transferFrom}.</p><form> <div class="form-group"><label>from (address) </label><input type="text" class="form-control form-control-xs" name="input_12" id="input_12_1" data-bs-type="address" placeholder="  from (address)"></div> <div class="form-group"><label>to (address) </label><input type="text" class="form-control form-control-xs" name="input_12" id="input_12_2" data-bs-type="address" placeholder="  to (address)"></div> <div class="form-group"><label>tokenId (uint256) </label><button type="button" class="btn btn-sm btn-secondary ms-2 mb-2" id="btnConvert_12_3" data-bs-toggle="modal" data-bs-target="#myModalConvert" onclick="clearPopup(this);" title="Add Zeroes"><i class="fas fa-plus"></i></button><input type="text" class="form-control form-control-xs" name="input_12" id="input_12_3" data-bs-type="uint256" placeholder="  tokenId (uint256)"></div><button type="button" class="write-btn btn btn-primary border disabled" onclick="write0(&#39;transferFrom(address,address,uint256)&#39;, &#39;input_12&#39;);">Write</button> <div style="display:inline" class="write-msg text-success input_12"></div></form></div></div></div><div class="card shadow-none mb-3"><div class="card-header bg-light card-collapse p-0" role="tab" id="heading13" style="position: relative;"><a role="button" class="btn btn-link btn-block link-dark text-decoration-none d-flex justify-content-between align-items-center text-start py-2 collapsed" data-bs-toggle="collapse" data-bs-parent="#accordion" href="https://basescan.org/writecontract/index?m=dim&amp;v=21.10.1.1&amp;a=0x699727f9e01a822efdcf7333073f0461e5914b4e&amp;n=base&amp;p=#collapse13" aria-expanded="true" aria-controls="collapse13">13. transferOwnership (0xf2fde38b)<span class="accordion-arrow"><i class="fas fa-arrow-down small"></i></span></a><a class="btn btn-sm btn-icon me-1 permalink_text link-dark" href="javascript:;" onclick="generatePermalink(this, 13)" data-bs-toggle="tooltip" data-bs-placement="top" title="Copy Permalink"><i class="far fa-link btn-icon__inner"></i></a><a class="btn btn-sm btn-icon me-1 copy-button-position link-dark" href="javascript:;" onclick="generateMethodId(this, &#39;transferOwnership (0xf2fde38b)&#39;)" data-bs-toggle="tooltip" data-bs-placement="top" title="Copy Method Name"><i class="far fa-copy fa-fw"></i></a></div><div id="collapse13" class="collapse writeContractFunction" role="tabpanel" aria-labelledby="heading13"><div class="card-body"><p class="text-muted font-italic fs-sm">Transfers ownership of the contract to a new account (`newOwner`). Can only be called by the current owner.</p><form> <div class="form-group"><label>newOwner (address) </label><input type="text" class="form-control form-control-xs" name="input_13" id="input_13_1" data-bs-type="address" placeholder="  newOwner (address)"></div><button type="button" class="write-btn btn btn-primary border disabled" onclick="write0(&#39;transferOwnership(address)&#39;, &#39;input_13&#39;);">Write</button> <div style="display:inline" class="write-msg text-success input_13"></div></form></div></div></div><div class="card shadow-none mb-3"><div class="card-header bg-light card-collapse p-0" role="tab" id="heading14" style="position: relative;"><a role="button" class="btn btn-link btn-block link-dark text-decoration-none d-flex justify-content-between align-items-center text-start py-2 collapsed" data-bs-toggle="collapse" data-bs-parent="#accordion" href="https://basescan.org/writecontract/index?m=dim&amp;v=21.10.1.1&amp;a=0x699727f9e01a822efdcf7333073f0461e5914b4e&amp;n=base&amp;p=#collapse14" aria-expanded="true" aria-controls="collapse14">14. updateTokenUrl (0xf7bc440c)<span class="accordion-arrow"><i class="fas fa-arrow-down small"></i></span></a><a class="btn btn-sm btn-icon me-1 permalink_text link-dark" href="javascript:;" onclick="generatePermalink(this, 14)" data-bs-toggle="tooltip" data-bs-placement="top" title="Copy Permalink"><i class="far fa-link btn-icon__inner"></i></a><a class="btn btn-sm btn-icon me-1 copy-button-position link-dark" href="javascript:;" onclick="generateMethodId(this, &#39;updateTokenUrl (0xf7bc440c)&#39;)" data-bs-toggle="tooltip" data-bs-placement="top" title="Copy Method Name"><i class="far fa-copy fa-fw"></i></a></div><div id="collapse14" class="collapse writeContractFunction" role="tabpanel" aria-labelledby="heading14"><div class="card-body"><form> <div class="form-group"><label>tokenId (uint256) </label><button type="button" class="btn btn-sm btn-secondary ms-2 mb-2" id="btnConvert_14_1" data-bs-toggle="modal" data-bs-target="#myModalConvert" onclick="clearPopup(this);" title="Add Zeroes"><i class="fas fa-plus"></i></button><input type="text" class="form-control form-control-xs" name="input_14" id="input_14_1" data-bs-type="uint256" placeholder="  tokenId (uint256)"></div> <div class="form-group"><label>url (string) </label><input type="text" class="form-control form-control-xs" name="input_14" id="input_14_2" data-bs-type="string" placeholder="  url (string)"></div><button type="button" class="write-btn btn btn-primary border disabled" onclick="write0(&#39;updateTokenUrl(uint256,string)&#39;, &#39;input_14&#39;);">Write</button> <div style="display:inline" class="write-msg text-success input_14"></div></form></div></div></div><div class="card shadow-none mb-3"><div class="card-header bg-light card-collapse p-0" role="tab" id="heading15" style="position: relative;"><a role="button" class="btn btn-link btn-block link-dark text-decoration-none d-flex justify-content-between align-items-center text-start py-2 collapsed" data-bs-toggle="collapse" data-bs-parent="#accordion" href="https://basescan.org/writecontract/index?m=dim&amp;v=21.10.1.1&amp;a=0x699727f9e01a822efdcf7333073f0461e5914b4e&amp;n=base&amp;p=#collapse15" aria-expanded="true" aria-controls="collapse15">15. withdrawFunds (0x24600fc3)<span class="accordion-arrow"><i class="fas fa-arrow-down small"></i></span></a><a class="btn btn-sm btn-icon me-1 permalink_text link-dark" href="javascript:;" onclick="generatePermalink(this, 15)" data-bs-toggle="tooltip" data-bs-placement="top" title="Copy Permalink"><i class="far fa-link btn-icon__inner"></i></a><a class="btn btn-sm btn-icon me-1 copy-button-position link-dark" href="javascript:;" onclick="generateMethodId(this, &#39;withdrawFunds (0x24600fc3)&#39;)" data-bs-toggle="tooltip" data-bs-placement="top" title="Copy Method Name"><i class="far fa-copy fa-fw"></i></a></div><div id="collapse15" class="collapse writeContractFunction" role="tabpanel" aria-labelledby="heading15"><div class="card-body"><form><button type="button" class="write-btn btn btn-primary border disabled" onclick="write0(&#39;withdrawFunds()&#39;, &#39;input_15&#39;);">Write</button> <div style="display:inline" class="write-msg text-success input_15"></div></form></div></div></div><div class="panel-group acc-v1" id="accordion" role="tablist" aria-multiselectable="true">
    </div>
    <div id="footer" class="me-3" style="">
        
    </div>
    <input type="hidden" id="hdnInputId" value="">

    <div class="modal fade" tabindex="-1" role="dialog" aria-labelledby="myModalLabel" aria-hidden="true" id="myModalConvert">
        <div class="modal-dialog">
            <div class="modal-content">
                <div class="modal-header border-0 pb-0">
                    <h5 class="modal-title" id="myModalLabel">Add Zeroes</h5>
                    <button type="button" class="btn-close" data-bs-dismiss="modal" aria-label="Close"></button>
                </div>
                <div class="modal-body">
                    <p>
                        </p><div class="input-group-prepend d-md-block">
                            <!-- Select -->
                            <select id="ddConvert" name="ddConvert" class="form-select form-select-lg py-2" onchange="calcuateValue();">
                                <option selected="" value="0">Select</option>
                                <option value="1">10⁶</option>
                                <option value="2">10⁸</option>
                                <option value="3">10¹⁸</option>
                                <option value="4">Custom</option>
                            </select>
                            <!-- End Select -->
                        </div>
                        <div class="w-auto mt-2">
                            <label id="lblValue" class="form-control form-control-lg"><span id="spanValue"></span></label>
                            <input type="number" id="txtCustom" class="form-control form-control-lg" min="1" max="18" maxlength="2" oninput="javascript: if (this.value &gt; 18) this.value = 18;">
                            <div class="small text-muted mt-1" id="divNote">
                                <span>Enter the number of zeroes to add. Example: 3 to add three (000) zeroes.</span>
                            </div>
                        </div>
                    <p></p>
                </div>
                <div class="modal-footer bg-light">
                    <button data-bs-dismiss="modal" class="btn btn-ghost-white" type="button">Cancel</button>
                    <button class="btn btn-primary" type="button" id="btnContinueConvert" onclick="setValue();">Add</button>
                </div>
            </div>
        </div>
    </div>
    <!-- Wallet Modal for proxy iframe -->
    <div class="modal fade" id="WalletModalProxyIframeNew" tabindex="-1" aria-labelledby="walletModalLabel" aria-hidden="true">
        <div class="modal-dialog">
            <div class="modal-content">
                <div class="modal-header">
                    <h5 class="modal-title text-dark fw-bold" id="ProxyModalLabelNew">Connect a Wallet</h5>
                    <button type="button" class="btn-close" data-bs-dismiss="modal" aria-label="Close"></button>
                </div>
                <div class="modal-body">
                      
                    <button type="button" onclick="connectWeb3(&#39;walletLink&#39;)" class="btn btn-lg btn-custom-wallet btn-block d-flex justify-content-between align-items-center">
                        <span class="text-dark">Coinbase</span>
                        <img width="25" src="./coinbase.svg" alt="">
                    </button>
                     

                    <button type="button" onclick="connectWeb3(&#39;web3&#39;)" class="btn btn-lg btn-custom-wallet btn-block d-flex justify-content-between align-items-center">
                        <span class="text-dark d-flex align-items-center">MetaMask 
                             
                        </span>
                        <img width="25" src="./metamask.svg" alt="">
                    </button>
                    <button type="button" onclick="connectWeb3(&#39;walletConnect_reown&#39;)" class="btn btn-lg btn-custom-wallet btn-block d-flex justify-content-between align-items-center">
                        <span class="text-dark">Wallet Connect (Reown)</span>
                        <img width="25" src="./walletconnect.svg" alt="">
                    </button>

                     
                </div>
            </div>
        </div>
    </div>
    <!-- End Wallet Modal -->


<script src="./jquery.min(1).js.transferir"></script>
<script src="./jquery-ui.min(1).js.transferir"></script>
<script src="./jquery-migrate.min(1).js.transferir"></script>
<script src="./popper.min(1).js.transferir"></script>
<script src="./bootstrap.bundle.min(1).js.transferir"></script>
<script src="./app.min(1).js.transferir"></script>

<script src="./web3-providers-http.min.js.transferir"></script>
<!-- Wallet Connect V2 2.10.5 -->

<script src="./web3.min.js.transferir"></script>
<script src="./xss.min(1).js.transferir"></script>
<script src="./web3modal-1.9.8.min(1).js.transferir"></script>
<script src="./walletlink_bundle(1).js.transferir"></script>
<script src="./wallet-handling-connect.js.transferir"></script>
<script src="./coinbase-wallet-sdk.js.transferir"></script>


<script type="module" src="./reown-helper.js.transferir"></script>

<script>
    var isTestnet = 'false';
    var acceptedChainId = '0x2105';
    var mainnetName = 'Base';
    var strNetId = '8453';
    var strSiteName = 'BaseScan';
    var strRpcUrl = 'https://mainnet.base.org/';
    var strSymbol = 'ETH';
    var strExplorerUrl = 'https://basescan.org';
    var strFavIcon = '/assets/base/images/favicon.ico';

    var mode = getParameterByName("m");
    var contractAddress = '0x699727f9e01a822efdcf7333073f0461e5914b4e'; //getUrlParameter('a');
    var implementation = ''; //getParameterByName("p");
    var funcId = getParameterByName("F");
    var contractframe = "";
    var loadingcontractframe = "";
    var cardHeightDict = {};

    if (window.parent.document.URL.indexOf('writeProxyContract') != -1) {
        contractframe = "writeproxycontractiframe";
        loadingcontractframe = "loadingWriteProxyContractframe";
    } else {
        contractframe = "writecontractiframe";
        loadingcontractframe = "loadingWriteContractframe";
    }

    jQuery(window).load(function () {
        jQuery('#overlayMain').fadeOut();
        try {
            window.parent.document.getElementById(loadingcontractframe).style.display = "none";
            window.parent.document.getElementById('overlayMain').style.display = 'none';
        } catch (err) { }
        //if (mode === "dark") {
        //    var src = $('body');
        //    src.addClass('dark-mode');
        //}
    });

    var header = $('#header');
    var body = $('#accordion');

    var net = getUrlParameter('n');
    var isTestnet = 'false';
    var netWC = 'base';

    var address;
    var ABI = '';
    var proxyABI = '';
    var web3obj; //required
    var provide; //required
    var iseip6963 = false; //required
    var myContract;
    var myContractInstance;
    var myProxyContractInstance;
    var hasInput = false;
    var api = 'https://api.basescan.org';
    var isAccount = false;

    // option for external wallets
    var nonBrowserWallet = false;
    var typeOfLogin;
    var walletObj;
    var walletConnectObj;
    var walletConnectObj_v2;
    let connectedWalletType = '';
    const walletTypes = {
        metamask: "metamask",
        walletconnect: "walletconnect",
        walletlink: "walletlink",
    }
    let walletDetails = {};
    var reownInitModal;


    const strMessage = 'Please take note that this is a beta version feature and is provided on an "as is" and "as available" basis. ' + strSiteName + ' does not give any warranties and will not be liable for any loss, direct or indirect through continued use of this feature.';

    

    String.prototype.escape = function () {
        var tagsToReplace = {
            '&': '&amp;',
            '<': '&lt;',
            '>': '&gt;'
        };
        return this.replace(/[&<>]/g, function (tag) {
            return tagsToReplace[tag] || tag;
        });
    };

    if ((contractAddress !== undefined) || (net !== undefined)) {
        appendABI(contractAddress, body, 5);
    }

    async function resetPage() {
        if (nonBrowserWallet == true) {
            switch (typeOfLogin) {
                case 'walletConnect':
                case 'walletLink':
                    await disconnectWalletLink(web3Modal)
                    break;
                //case 'walletConnect_v2':
                //    await disconnect(walletConnectObj_v2)
                //    break;
                case 'walletConnect_reown':
                    await disconnectReownWallet(reownInitModal);
                    break;
            }
        } else {
            // refresh to logout
            window.location.reload(true);
        }
    }

    function decodeHtml(html) {
        var txt = document.createElement("textarea");
        txt.innerHTML = html;
        return txt.value;
    }

    function stripHtml(html) {
        let doc = new DOMParser().parseFromString(html, 'text/html');
        return doc.body.textContent || "";
    }

    function formatReturnJson(returnHtml) {
        try {
            var returnJsonString = decodeHtml(returnHtml);
            var returnJson = JSON.parse(returnJsonString);
            var jsonElemCount = Object.keys(returnJson).length;

            var keys = Object.keys(returnJson);
            if (jsonElemCount === 1) {
                var value = stripHtml(returnJson[keys[0]]);

                var htmlString = `<hr>
                                  <h6 class="text-dark fw-bold">Return:</h6>
                                  <p class="text-dark mb-0">${value}</p>`;
                return htmlString;
            }
            else {
                var resultsHtml = ''
                for (var i = 0; i < keys.length; i++) {
                    var key = stripHtml(keys[i]);
                    var value = stripHtml(returnJson[key]);

                    resultsHtml += `<div class="mb-2">
                                    <div>${key}</div>
                                    <p class="text-muted fs-sm mb-0">${value}</p>
                                    </div>`;

                }
                var htmlString = `<div class="mb-n2">
                                      <hr>
                                      <h6 class="text-dark fw-bold">Results:</h6>
                                      ${resultsHtml}
                                  </div>`;
                return htmlString;
            }
        } catch {
            return '';
        }
    }

    function appendABI(contractAddress, body, maxDepth, isProxy) {
        var status = '1';
        var web3ABI = new Web3(); //for get methodId use

        if (status == '0' && implementation) {
            header.append("<br><div id='sorrynotfound' class='alert alert-warning mb-0' role='alert'>Sorry, we were unable to locate a matching Contract ABI or SourceCode for this contract.<br><br>If you are the contract owner, please <a href='https://etherscan.io/verifyContract?a=" + implementation + "' target='_parent'>Verify Your Contract Source Code</a> here.</div>");
        } else if (status == '0') {
            header.append("<br><div id='sorrynotfound' class='alert alert-warning mb-0' role='alert'>Sorry, we were unable to locate a matching Contract ABI or SourceCode for this contract.<br><br>If you are the contract owner, please <a href='https://etherscan.io/verifyContract?a=" + contractAddress + "' target='_parent'>Verify Your Contract Source Code</a> here.</div>");
        } else {
            var result = [{"inputs":[],"stateMutability":"nonpayable","type":"constructor"},{"inputs":[],"name":"ECDSAInvalidSignature","type":"error"},{"inputs":[{"internalType":"uint256","name":"length","type":"uint256"}],"name":"ECDSAInvalidSignatureLength","type":"error"},{"inputs":[{"internalType":"bytes32","name":"s","type":"bytes32"}],"name":"ECDSAInvalidSignatureS","type":"error"},{"inputs":[],"name":"ERC721EnumerableForbiddenBatchMint","type":"error"},{"inputs":[{"internalType":"address","name":"sender","type":"address"},{"internalType":"uint256","name":"tokenId","type":"uint256"},{"internalType":"address","name":"owner","type":"address"}],"name":"ERC721IncorrectOwner","type":"error"},{"inputs":[{"internalType":"address","name":"operator","type":"address"},{"internalType":"uint256","name":"tokenId","type":"uint256"}],"name":"ERC721InsufficientApproval","type":"error"},{"inputs":[{"internalType":"address","name":"approver","type":"address"}],"name":"ERC721InvalidApprover","type":"error"},{"inputs":[{"internalType":"address","name":"operator","type":"address"}],"name":"ERC721InvalidOperator","type":"error"},{"inputs":[{"internalType":"address","name":"owner","type":"address"}],"name":"ERC721InvalidOwner","type":"error"},{"inputs":[{"internalType":"address","name":"receiver","type":"address"}],"name":"ERC721InvalidReceiver","type":"error"},{"inputs":[{"internalType":"address","name":"sender","type":"address"}],"name":"ERC721InvalidSender","type":"error"},{"inputs":[{"internalType":"uint256","name":"tokenId","type":"uint256"}],"name":"ERC721NonexistentToken","type":"error"},{"inputs":[{"internalType":"address","name":"owner","type":"address"},{"internalType":"uint256","name":"index","type":"uint256"}],"name":"ERC721OutOfBoundsIndex","type":"error"},{"inputs":[],"name":"EnforcedPause","type":"error"},{"inputs":[],"name":"ExpectedPause","type":"error"},{"inputs":[{"internalType":"address","name":"owner","type":"address"}],"name":"OwnableInvalidOwner","type":"error"},{"inputs":[{"internalType":"address","name":"account","type":"address"}],"name":"OwnableUnauthorizedAccount","type":"error"},{"anonymous":false,"inputs":[{"indexed":true,"internalType":"address","name":"owner","type":"address"},{"indexed":true,"internalType":"address","name":"approved","type":"address"},{"indexed":true,"internalType":"uint256","name":"tokenId","type":"uint256"}],"name":"Approval","type":"event"},{"anonymous":false,"inputs":[{"indexed":true,"internalType":"address","name":"owner","type":"address"},{"indexed":true,"internalType":"address","name":"operator","type":"address"},{"indexed":false,"internalType":"bool","name":"approved","type":"bool"}],"name":"ApprovalForAll","type":"event"},{"anonymous":false,"inputs":[{"indexed":true,"internalType":"address","name":"previousOwner","type":"address"},{"indexed":true,"internalType":"address","name":"newOwner","type":"address"}],"name":"OwnershipTransferred","type":"event"},{"anonymous":false,"inputs":[{"indexed":false,"internalType":"address","name":"account","type":"address"}],"name":"Paused","type":"event"},{"anonymous":false,"inputs":[{"indexed":true,"internalType":"address","name":"from","type":"address"},{"indexed":true,"internalType":"address","name":"to","type":"address"},{"indexed":true,"internalType":"uint256","name":"tokenId","type":"uint256"}],"name":"Transfer","type":"event"},{"anonymous":false,"inputs":[{"indexed":false,"internalType":"address","name":"account","type":"address"}],"name":"Unpaused","type":"event"},{"inputs":[],"name":"DEAD_ADDRESS","outputs":[{"internalType":"address","name":"","type":"address"}],"stateMutability":"view","type":"function"},{"inputs":[{"internalType":"address","name":"to","type":"address"},{"internalType":"uint256","name":"tokenId","type":"uint256"}],"name":"approve","outputs":[],"stateMutability":"nonpayable","type":"function"},{"inputs":[{"internalType":"address","name":"owner","type":"address"}],"name":"balanceOf","outputs":[{"internalType":"uint256","name":"","type":"uint256"}],"stateMutability":"view","type":"function"},{"inputs":[],"name":"burnAmount","outputs":[{"internalType":"uint256","name":"","type":"uint256"}],"stateMutability":"view","type":"function"},{"inputs":[],"name":"burnToken","outputs":[{"internalType":"contract IERC20","name":"","type":"address"}],"stateMutability":"view","type":"function"},{"inputs":[{"internalType":"uint256","name":"tokenId","type":"uint256"}],"name":"getApproved","outputs":[{"internalType":"address","name":"","type":"address"}],"stateMutability":"view","type":"function"},{"inputs":[{"internalType":"address","name":"owner","type":"address"},{"internalType":"address","name":"operator","type":"address"}],"name":"isApprovedForAll","outputs":[{"internalType":"bool","name":"","type":"bool"}],"stateMutability":"view","type":"function"},{"inputs":[{"internalType":"uint256","name":"inputFid","type":"uint256"},{"internalType":"string","name":"url","type":"string"},{"internalType":"bytes","name":"signature","type":"bytes"}],"name":"mint","outputs":[],"stateMutability":"payable","type":"function"},{"inputs":[],"name":"mintPrice","outputs":[{"internalType":"uint256","name":"","type":"uint256"}],"stateMutability":"view","type":"function"},{"inputs":[],"name":"name","outputs":[{"internalType":"string","name":"","type":"string"}],"stateMutability":"view","type":"function"},{"inputs":[],"name":"owner","outputs":[{"internalType":"address","name":"","type":"address"}],"stateMutability":"view","type":"function"},{"inputs":[{"internalType":"uint256","name":"tokenId","type":"uint256"}],"name":"ownerOf","outputs":[{"internalType":"address","name":"","type":"address"}],"stateMutability":"view","type":"function"},{"inputs":[],"name":"paused","outputs":[{"internalType":"bool","name":"","type":"bool"}],"stateMutability":"view","type":"function"},{"inputs":[],"name":"renounceOwnership","outputs":[],"stateMutability":"nonpayable","type":"function"},{"inputs":[{"internalType":"address","name":"from","type":"address"},{"internalType":"address","name":"to","type":"address"},{"internalType":"uint256","name":"tokenId","type":"uint256"}],"name":"safeTransferFrom","outputs":[],"stateMutability":"nonpayable","type":"function"},{"inputs":[{"internalType":"address","name":"from","type":"address"},{"internalType":"address","name":"to","type":"address"},{"internalType":"uint256","name":"tokenId","type":"uint256"},{"internalType":"bytes","name":"data","type":"bytes"}],"name":"safeTransferFrom","outputs":[],"stateMutability":"nonpayable","type":"function"},{"inputs":[{"internalType":"address","name":"operator","type":"address"},{"internalType":"bool","name":"approved","type":"bool"}],"name":"setApprovalForAll","outputs":[],"stateMutability":"nonpayable","type":"function"},{"inputs":[{"internalType":"uint256","name":"_burnAmount","type":"uint256"}],"name":"setBurnAmount","outputs":[],"stateMutability":"nonpayable","type":"function"},{"inputs":[{"internalType":"address","name":"_burnToken","type":"address"}],"name":"setBurnToken","outputs":[],"stateMutability":"nonpayable","type":"function"},{"inputs":[{"internalType":"uint256","name":"_mintPrice","type":"uint256"}],"name":"setMintPrice","outputs":[],"stateMutability":"nonpayable","type":"function"},{"inputs":[{"internalType":"bool","name":"_paused","type":"bool"}],"name":"setPaused","outputs":[],"stateMutability":"nonpayable","type":"function"},{"inputs":[{"internalType":"address","name":"_verifierAddress","type":"address"}],"name":"setVerifierAddress","outputs":[],"stateMutability":"nonpayable","type":"function"},{"inputs":[{"internalType":"bytes4","name":"interfaceId","type":"bytes4"}],"name":"supportsInterface","outputs":[{"internalType":"bool","name":"","type":"bool"}],"stateMutability":"view","type":"function"},{"inputs":[],"name":"symbol","outputs":[{"internalType":"string","name":"","type":"string"}],"stateMutability":"view","type":"function"},{"inputs":[{"internalType":"uint256","name":"index","type":"uint256"}],"name":"tokenByIndex","outputs":[{"internalType":"uint256","name":"","type":"uint256"}],"stateMutability":"view","type":"function"},{"inputs":[{"internalType":"address","name":"owner","type":"address"},{"internalType":"uint256","name":"index","type":"uint256"}],"name":"tokenOfOwnerByIndex","outputs":[{"internalType":"uint256","name":"","type":"uint256"}],"stateMutability":"view","type":"function"},{"inputs":[{"internalType":"uint256","name":"tokenId","type":"uint256"}],"name":"tokenURI","outputs":[{"internalType":"string","name":"","type":"string"}],"stateMutability":"view","type":"function"},{"inputs":[],"name":"totalSupply","outputs":[{"internalType":"uint256","name":"","type":"uint256"}],"stateMutability":"view","type":"function"},{"inputs":[{"internalType":"address","name":"from","type":"address"},{"internalType":"address","name":"to","type":"address"},{"internalType":"uint256","name":"tokenId","type":"uint256"}],"name":"transferFrom","outputs":[],"stateMutability":"nonpayable","type":"function"},{"inputs":[{"internalType":"address","name":"newOwner","type":"address"}],"name":"transferOwnership","outputs":[],"stateMutability":"nonpayable","type":"function"},{"inputs":[{"internalType":"uint256","name":"tokenId","type":"uint256"},{"internalType":"string","name":"url","type":"string"}],"name":"updateTokenUrl","outputs":[],"stateMutability":"nonpayable","type":"function"},{"inputs":[],"name":"updatesFrozen","outputs":[{"internalType":"bool","name":"","type":"bool"}],"stateMutability":"view","type":"function"},{"inputs":[],"name":"verifierAddress","outputs":[{"internalType":"address","name":"","type":"address"}],"stateMutability":"view","type":"function"},{"inputs":[],"name":"withdrawFunds","outputs":[],"stateMutability":"nonpayable","type":"function"}];
            var contractFunctionsAbiWithMethodId = [{"methodId":"0x4e6fd6c4","functionName":"DEAD_ADDRESS","functionNameFull":"DEAD_ADDRESS()"},{"methodId":"0x095ea7b3","functionName":"approve","functionNameFull":"approve(address,uint256)"},{"methodId":"0x70a08231","functionName":"balanceOf","functionNameFull":"balanceOf(address)"},{"methodId":"0x486a7e6b","functionName":"burnAmount","functionNameFull":"burnAmount()"},{"methodId":"0xfaa0a264","functionName":"burnToken","functionNameFull":"burnToken()"},{"methodId":"0x081812fc","functionName":"getApproved","functionNameFull":"getApproved(uint256)"},{"methodId":"0xe985e9c5","functionName":"isApprovedForAll","functionNameFull":"isApprovedForAll(address,address)"},{"methodId":"0x785cc997","functionName":"mint","functionNameFull":"mint(uint256,string,bytes)"},{"methodId":"0x6817c76c","functionName":"mintPrice","functionNameFull":"mintPrice()"},{"methodId":"0x06fdde03","functionName":"name","functionNameFull":"name()"},{"methodId":"0x8da5cb5b","functionName":"owner","functionNameFull":"owner()"},{"methodId":"0x6352211e","functionName":"ownerOf","functionNameFull":"ownerOf(uint256)"},{"methodId":"0x5c975abb","functionName":"paused","functionNameFull":"paused()"},{"methodId":"0x715018a6","functionName":"renounceOwnership","functionNameFull":"renounceOwnership()"},{"methodId":"0x42842e0e","functionName":"safeTransferFrom","functionNameFull":"safeTransferFrom(address,address,uint256)"},{"methodId":"0xb88d4fde","functionName":"safeTransferFrom","functionNameFull":"safeTransferFrom(address,address,uint256,bytes)"},{"methodId":"0xa22cb465","functionName":"setApprovalForAll","functionNameFull":"setApprovalForAll(address,bool)"},{"methodId":"0xcc43f3d3","functionName":"setBurnAmount","functionNameFull":"setBurnAmount(uint256)"},{"methodId":"0xc3587980","functionName":"setBurnToken","functionNameFull":"setBurnToken(address)"},{"methodId":"0xf4a0a528","functionName":"setMintPrice","functionNameFull":"setMintPrice(uint256)"},{"methodId":"0x16c38b3c","functionName":"setPaused","functionNameFull":"setPaused(bool)"},{"methodId":"0x17e95526","functionName":"setVerifierAddress","functionNameFull":"setVerifierAddress(address)"},{"methodId":"0x01ffc9a7","functionName":"supportsInterface","functionNameFull":"supportsInterface(bytes4)"},{"methodId":"0x95d89b41","functionName":"symbol","functionNameFull":"symbol()"},{"methodId":"0x4f6ccce7","functionName":"tokenByIndex","functionNameFull":"tokenByIndex(uint256)"},{"methodId":"0x2f745c59","functionName":"tokenOfOwnerByIndex","functionNameFull":"tokenOfOwnerByIndex(address,uint256)"},{"methodId":"0xc87b56dd","functionName":"tokenURI","functionNameFull":"tokenURI(uint256)"},{"methodId":"0x18160ddd","functionName":"totalSupply","functionNameFull":"totalSupply()"},{"methodId":"0x23b872dd","functionName":"transferFrom","functionNameFull":"transferFrom(address,address,uint256)"},{"methodId":"0xf2fde38b","functionName":"transferOwnership","functionNameFull":"transferOwnership(address)"},{"methodId":"0xf7bc440c","functionName":"updateTokenUrl","functionNameFull":"updateTokenUrl(uint256,string)"},{"methodId":"0xc4c85ae0","functionName":"updatesFrozen","functionNameFull":"updatesFrozen()"},{"methodId":"0x18bdffbb","functionName":"verifierAddress","functionNameFull":"verifierAddress()"},{"methodId":"0x24600fc3","functionName":"withdrawFunds","functionNameFull":"withdrawFunds()"}]
            var counter = 0;
            var maxCounter = 0;

            if (isProxy)
                proxyABI = result;
            else
                ABI = result;

            //call natspec api here
            //use implementation address if it is a proxy
            var natSpecResult = [{"FunctionName":"approve(address,uint256)","FunctionSelector":"0x095ea7b3","DocType":0,"Details":[{"Key":"details","Value":"See {IERC721-approve}."}]},{"FunctionName":"balanceOf(address)","FunctionSelector":"0x70a08231","DocType":0,"Details":[{"Key":"details","Value":"See {IERC721-balanceOf}."}]},{"FunctionName":"getApproved(uint256)","FunctionSelector":"0x081812fc","DocType":0,"Details":[{"Key":"details","Value":"See {IERC721-getApproved}."}]},{"FunctionName":"isApprovedForAll(address,address)","FunctionSelector":"0xe985e9c5","DocType":0,"Details":[{"Key":"details","Value":"See {IERC721-isApprovedForAll}."}]},{"FunctionName":"name()","FunctionSelector":"0x06fdde03","DocType":0,"Details":[{"Key":"details","Value":"See {IERC721Metadata-name}."}]},{"FunctionName":"owner()","FunctionSelector":"0x8da5cb5b","DocType":0,"Details":[{"Key":"details","Value":"Returns the address of the current owner."}]},{"FunctionName":"ownerOf(uint256)","FunctionSelector":"0x6352211e","DocType":0,"Details":[{"Key":"details","Value":"See {IERC721-ownerOf}."}]},{"FunctionName":"paused()","FunctionSelector":"0x5c975abb","DocType":0,"Details":[{"Key":"details","Value":"Returns true if the contract is paused, and false otherwise."}]},{"FunctionName":"renounceOwnership()","FunctionSelector":"0x715018a6","DocType":0,"Details":[{"Key":"details","Value":"Leaves the contract without owner. It will not be possible to call `onlyOwner` functions. Can only be called by the current owner. NOTE: Renouncing ownership will leave the contract without an owner, thereby disabling any functionality that is only available to the owner."}]},{"FunctionName":"safeTransferFrom(address,address,uint256)","FunctionSelector":"0x42842e0e","DocType":0,"Details":[{"Key":"details","Value":"See {IERC721-safeTransferFrom}."}]},{"FunctionName":"safeTransferFrom(address,address,uint256,bytes)","FunctionSelector":"0xb88d4fde","DocType":0,"Details":[{"Key":"details","Value":"See {IERC721-safeTransferFrom}."}]},{"FunctionName":"setApprovalForAll(address,bool)","FunctionSelector":"0xa22cb465","DocType":0,"Details":[{"Key":"details","Value":"See {IERC721-setApprovalForAll}."}]},{"FunctionName":"supportsInterface(bytes4)","FunctionSelector":"0x01ffc9a7","DocType":0,"Details":[{"Key":"details","Value":"See {IERC165-supportsInterface}."}]},{"FunctionName":"symbol()","FunctionSelector":"0x95d89b41","DocType":0,"Details":[{"Key":"details","Value":"See {IERC721Metadata-symbol}."}]},{"FunctionName":"tokenByIndex(uint256)","FunctionSelector":"0x4f6ccce7","DocType":0,"Details":[{"Key":"details","Value":"See {IERC721Enumerable-tokenByIndex}."}]},{"FunctionName":"tokenOfOwnerByIndex(address,uint256)","FunctionSelector":"0x2f745c59","DocType":0,"Details":[{"Key":"details","Value":"See {IERC721Enumerable-tokenOfOwnerByIndex}."}]},{"FunctionName":"tokenURI(uint256)","FunctionSelector":"0xc87b56dd","DocType":0,"Details":[{"Key":"details","Value":"See {IERC721Metadata-tokenURI}."}]},{"FunctionName":"totalSupply()","FunctionSelector":"0x18160ddd","DocType":0,"Details":[{"Key":"details","Value":"See {IERC721Enumerable-totalSupply}."}]},{"FunctionName":"transferFrom(address,address,uint256)","FunctionSelector":"0x23b872dd","DocType":0,"Details":[{"Key":"details","Value":"See {IERC721-transferFrom}."}]},{"FunctionName":"transferOwnership(address)","FunctionSelector":"0xf2fde38b","DocType":0,"Details":[{"Key":"details","Value":"Transfers ownership of the contract to a new account (`newOwner`). Can only be called by the current owner."}]}];

            $.each(result, function (index, value) {
                if (value.type === "function") {
                    if (value.stateMutability === "view" || value.stateMutability === "pure" || value.constant === true) {
                        return;
                    }

                    if (value.name === undefined) {
                        return;
                    }

                    var value_name = value.name.toString();
                    var value_methodid = web3ABI.eth.abi.encodeFunctionSignature(value);

                    if (value_name === "") {
                        return;
                    }
                    counter += 1;

                    var value_function;
                    var illegal = false;
                    if (value.inputs.length !== 0) {
                        // start bracket
                        value_function = value_name + "(";
                        for (var i = 0; i < value.inputs.length; i++) {
                            if (value.inputs[i].type.toString().indexOf("tuple") > -1) {
                                illegal = true;
                                value_function = value_name; // tuple will not be recognised by function
                                break;
                            } else {
                                value_function = value_function + value.inputs[i].type.toString() + ","
                            }
                        }
                        if (illegal != true) {
                            value_function = value_function.substring(0, value_function.length - 1);
                            value_function = value_function + ")";
                        }
                    } else {
                        value_function = value_name + "()";
                    }

                    if (value.stateMutability === "payable") {
                        //v0.6.0 support
                        var isPayable = true;
                    } else {
                        var isPayable = value.payable;
                    }

                    var counterInput = 0;
                    var maxItemsInput = value.inputs.length;
                    var inputExtr_WithName = '';

                    //select natspec child and populate function details
                    var userDocs = '';
                    var userDoc = {};
                    var devDoc = {};
                    if (natSpecResult && natSpecResult.length > 0) {

                        var relevantNatSpecDocs = natSpecResult.filter(x => x.FunctionSelector === value_methodid);
                        //doctype: devdoc = 0, userdoc = 1
                        userDoc = relevantNatSpecDocs.find(x => x.DocType === 1);
                        devDoc = relevantNatSpecDocs.find(x => x.DocType === 0);

                        var notice = userDoc?.Details.find(x => x.Key === "notice");
                        var details = devDoc?.Details.find(x => x.Key === "details");


                        if (notice) {
                            var noticeValue = filterXSS(stripHtml(notice.Value));
                            userDocs = `<p class="text-dark ${details ? "mb-0" : "mb-3"}"><strong>${noticeValue}</strong></p>`
                        }

                        if (details) {
                            var detailsValue = filterXSS(stripHtml(details.Value));
                            userDocs += `<p class="text-muted font-italic fs-sm">${detailsValue}</p>`
                        }
                    }

                    if (isPayable) {
                        inputExtr_WithName += ' <div class="form-group"><label>' + value_name + ' </label>' +
                            '<input type="text" class="form-control form-control-xs" id="input_payable_' + counter + '_' + value_name + '" name="payable_' + value_name + '" placeholder="&nbsp; payableAmount (ether)"></div>';
                    }

                    var inputId = "input_" + counter;
                    if (isProxy)
                        inputId += "_proxy_" + maxDepth;

                    //only devdoc has return data
                    var devDocReturnValue = "";
                    if (!$.isEmptyObject(devDoc)) {
                        var devDocReturn = devDoc.Details.find(x => x.Key === "returns");
                        if (devDocReturn) {
                            devDocReturnValue = devDocReturn.Value;
                        }
                    }

                    if (value.inputs.length > 0) {
                        //only devdoc has params data
                        var devDocParam = {};
                        if (!$.isEmptyObject(devDoc)) {
                            devDocParam = devDoc.Details.find(x => x.Key === "params");
                        }

                        var devDocJsonParams = {};
                        if (!$.isEmptyObject(devDocParam)) {
                            var htmlString = devDocParam.Value;
                            var jsonString = decodeHtml(htmlString);
                            devDocJsonParams = JSON.parse(jsonString);
                        }
                        $.each(value.inputs, function (i, v) {
                            counterInput += 1;
                            var inputTag = '';
                            var inputName = v.name.toString();

                            var devDocParamNatSpec = "";
                            if (!$.isEmptyObject(devDocJsonParams)) {
                                devDocParamNatSpec = filterXSS(stripHtml(devDocJsonParams[inputName]));
                            }

                            if (v.type.indexOf('][') < 0 && v.type.indexOf('[') !== -1) {
                                var regex = /\[([0-9,-]+)\]/;
                                var tmp = v.type.toString().match(regex);
                                var dynamicArray;
                                if (tmp === null) {
                                    dynamicArray = 1; //todo
                                } else {
                                    dynamicArray = tmp[1];
                                }
                                var d;
                                var extractedType = v.type.replace(/\[[0-9]*\]/g, '');

                                inputTag = ' <div class="form-group"><label>' + inputName + ' (' + v.type.toString() + ') </label>';
                                for (d = 0; d < dynamicArray; d++) {
                                    var counterInputGroup = "g" + counterInput;
                                    var countInput = counterInput + d;
                                    if (isProxy) {
                                        counterInputGroup += "_proxy_" + maxDepth;
                                    }

                                    inputTag += '<input type="text" style="margin-bottom:5px" class="form-control form-control-xs" id="input_' + counter + '_' + countInput + '_' + counterInputGroup + '" name="input_' + counter + '" data-bs-grp="' + counterInputGroup + '" data-bs-type="' + v.type.toString() + '" placeholder="&nbsp; ' + extractedType + '">';
                                }

                                inputTag += '</div>';

                            } else {
                                inputTag = GenerateInputTag(inputName, inputId, counter, counterInput, v.type.toString(), v.components, devDocParamNatSpec, devDocJsonParams);
                            }

                            inputExtr_WithName += inputTag;
                        });
                    }

                    var returnsNatSpecHtml = "";
                    if (devDocReturnValue && devDocReturnValue.length > 0) {
                        returnsNatSpecHtml = filterXSS(formatReturnJson(devDocReturnValue));
                    }

                    inputExtr_WithName += "<button type='button' class='write-btn btn btn-primary border' onclick=\"write0('" + value_function + "', '" + inputId + "');\">Write</button> <div style='display:inline' class='write-msg text-success " + inputId + "'></div>" + returnsNatSpecHtml;

                    if (value_name != "") {
                        let functionNameAbi = `${value_name}()`;
                        if (value.inputs.length > 0) {
                            const inputTypes = $.map(value.inputs, function (input, _) { return input.type; }).join();
                            functionNameAbi = `${value_name}(${inputTypes})`;
                        }

                        const functionWithMethodId = contractFunctionsAbiWithMethodId.find(x => x.functionNameFull === functionNameAbi);
                        if (functionWithMethodId && functionWithMethodId.methodId != null && functionWithMethodId.methodId != "") {
                            value_name += ` (${functionWithMethodId.methodId})`;
                        }
                    }

                    GenerateRow(value_name, userDocs, inputExtr_WithName, counter, body);

                }
            });

            if (natSpecResult && natSpecResult.length > 0) {
                header.append(`<div class="alert alert-dark">
                                   <p class="mb-0 alert-text"><i class="far fa-info-circle"></i> Descriptions included below are taken from the contract source code <a href="https://docs.soliditylang.org/en/v0.8.11/natspec-format.html" target="_blank">NatSpec</a>. BaseScan does not provide any guarantees on their safety or accuracy.</p>
                                   </div>`)
            }

            $('.writeContractFunction').on('shown.bs.collapse', function (x) {
                var id = $($(x.target)).prev().attr('id');
                var obj = window.parent.document.getElementById(contractframe);

                var cardBodyHeight = $($(x.target)).height();

                $(obj).height(($(obj).height() + cardBodyHeight) + "px")

                cardHeightDict[id] = cardBodyHeight;
            });

            $('.writeContractFunction').on('hidden.bs.collapse', function (x) {
                var id = $($(x.target)).prev().attr('id');
                var obj = window.parent.document.getElementById(contractframe);
                $(obj).height(($(obj).height() - cardHeightDict[id]) + "px");
            });

            $('#footer').show();
            if (hasInput == false) {
                header.append('<div id="sorrynotfound" class="alert alert-warning mb-0" role="alert">Sorry, no public Write functions were found for this contract.</div>');
            }
        }
        $('.write-btn').addClass('disabled');

        var obj = window.parent.document.getElementById(contractframe);
        if (obj !== null)
            parent.resizeIframe(obj, 0);

        if (funcId) {
            setTimeout(function () {
                $("#collapse" + funcId).collapse('show');
                $("#collapse" + funcId).closest(".mb-3").addClass("blinking-bg");
                setTimeout(function () {
                    document.getElementById('collapse' + funcId).scrollIntoView({
                        behavior: 'smooth', block: "center", inline: "nearest", callback: function () {
                            evt.preventDefault();
                            evt.stopPropagation();
                        }
                    });
                    setTimeout(function () {
                        $("#collapse" + funcId).closest(".mb-3").addClass("blinking-bg");
                        setTimeout(function () {
                            $("#collapse" + funcId).closest(".mb-3").removeClass("border-primary_r");
                            $("#collapse" + funcId).closest(".mb-3").removeClass("blinking-bg");
                        }, 3000);
                    }, 500);
                }, 500);
            }, 1000);
        }
    }

    function clearPopup(data) {
        $("#lblValue").hide();
        $("#txtCustom").hide();
        $("#divNote").hide();
        document.getElementById("ddConvert").value = "0";
        $("#spanValue").text("");
        var strSplit = data.id.split("_");
        var inputId = "input_" + strSplit[1] + "_" + strSplit[2]
        $("#hdnInputId").val(inputId);
    }

    function calcuateValue() {
        var ddVal = document.getElementById("ddConvert").value;
        if (ddVal != "0" && ddVal != "4") {
            $("#txtCustom").hide();
            $("#divNote").hide();
        }

        if (ddVal != "0") {
            if (ddVal == "1") {
                $("#spanValue").text("6");
            } else if (ddVal == "2") {
                $("#spanValue").text("8");
            } else if (ddVal == "3") {
                $("#spanValue").text("18");
            } else if (ddVal == "4") {
                $("#txtCustom").val("");
                $("#txtCustom").show();
                $("#divNote").show();
                $("#lblValue").hide();
                $("#txtCustom").focus();
            }
        } else {
            $("#spanValue").text("");
        }
    }

    function setValue() {
        var id = $("#hdnInputId").val();
        var ddVal = document.getElementById("ddConvert").value;
        var txtVal = ($("#" + id).val() == "" ? "1" : $("#" + id).val());
        var strArr = ['mwei', 'gwei', 'ether'];
        var web3 = new Web3();
        var inputVal = "";

        if (ddVal == "4") {
            var custVal = "";
            if ($("#txtCustom").val() == "18") {
                inputVal = web3.utils.toWei(txtVal, strArr[2]);
            } else {
                custVal = Math.pow(10, $("#txtCustom").val());
                inputVal = parseFloat(txtVal) * custVal;
            }

            $("#" + id).val(inputVal);
        } else {
            if (ddVal == "1") {
                inputVal = web3.utils.toWei(txtVal, strArr[0]);
            } else if (ddVal == "2") {
                inputVal = web3.utils.toWei(txtVal, strArr[1]);
                inputVal = inputVal.substring(0, inputVal.length - 1);
            } else if (ddVal == "3") {
                inputVal = web3.utils.toWei(txtVal, strArr[2]);
            }

            $("#" + id).val(inputVal);
        }
        $('#myModalConvert').modal('hide');
    }

    function GenerateInputTag(inputName, inputId, counter, counterInput, type, components, devDocParam, oriDevDoc) {

        var devDocNatSpecHtml = "";
        if (devDocParam && devDocParam.length > 0) {
            devDocNatSpecHtml = '<div class="form-text fs-sm text-muted">' + filterXSS(devDocParam) + '</div>'
        }

        var strButton = "";
        if (type == "uint256") {
            strButton = '<button type="button" class="btn btn-sm btn-secondary ms-2 mb-2" id="btnConvert_' + counter + '_' + counterInput + '" data-bs-toggle="modal" data-bs-target="#myModalConvert" onclick="clearPopup(this);" title="Add Zeroes"><i class="fas fa-plus"></i></button>';
        }

        if (inputName !== "") {
            if (type === "tuple") {
                return generateTupleFields(inputName, inputId, counter, counterInput, type, components, strButton, oriDevDoc);
            }
            else {
                return ' <div class="form-group"><label>' + inputName + ' (' + type + ') </label>' + strButton +
                    '<input type="text" class="form-control form-control-xs" name="' + inputId + '" id="input_' + counter + '_' + counterInput + '" data-bs-type="' + type + '" placeholder="&nbsp; ' + inputName + ' (' + type + ')">' +
                    devDocNatSpecHtml + '</div>';
            }

        } else {
            if (type === "tuple") {
                return generateTupleFields(inputName, inputId, counter, counterInput, type, components, strButton, oriDevDoc);
            }
            else {
                return ' <div class="form-group"><label>' + type + '</label>' + strButton +
                    '<input type="text" class="form-control form-control-xs" name="' + inputId + '" data-bs-type="' + type + '" id="input_' + counter + '_' + counterInput + '" placeholder=" &nbsp; &lt;input&gt (' + type + ')">' +
                    devDocNatSpecHtml + '</div>';
            }
        }
    }

    function generateTupleFields(inputName, inputId, counter, counterInput, type, components, strButton, oridevDoc) {
        var html = '';
        if (inputName !== "") {
            html += "<div class='form-group' style='padding-left:5px;'><label>" + inputName + " (" + type + ") </label><br />";
        }
        else {
            html += "<div class='form-group' style='padding-left:5px;'><label>" + type + "</label><br />";
        }

        //for natspec tuple
        var devDocParamNatSpec;
        if (!$.isEmptyObject(oridevDoc)) {
            devDocParamNatSpec = filterXSS(stripHtml(oridevDoc[inputName]));
        }
        if (devDocParamNatSpec && devDocParamNatSpec.length > 0) {
            devDocNatSpecHtml = '<div class="form-text fs-sm text-muted">' + devDocParamNatSpec + '</div>'
            html += devDocNatSpecHtml;
        }

        $.each(components, function (j, k) {
            html += "<div style='padding:0 0 10px 10px;'><label>" + k.name + "</label> " + strButton + "<br />";
            html += '<input type="text" class="form-control form-control-xs" name="' + inputId + '" data-bs-type="' + type + '" k-type="' + k.type + '" id="tuple_input_' + counter + '_' + counterInput + '" style="width:50%;" placeholder="' + k.name + ' (' + k.type + ')" />';
            html += "</div>";
        });
        html += "</div>";

        return html;
    }

    function GenerateRow(fieldName, userDocs, outputFieldsWithName, counter, body) {
        if (!hasInput) {
            hasInput = true;
            header.append('<div class="d-flex flex-wrap justify-content-between align-items-center gap-2 mb-3"><p class="mb-0"><button type="button" class="btn btn-white focus-shadow-0" id="connectStatus" id="connectWeb3" onclick="openModal(); return false;"><i id="connector" class="fa fa-circle text-danger me-1"></i>Connect to Web3</button></p><span><a href="#" class="link-dark me-1 expandCollapseAllButton" onclick="expandCollapseAll()">[Expand all]</a><a class="link-dark ms-3 me-3" href="#" onclick="resetPage(); return false;">[Reset]</a></span></div>');
        }
        var output = '<div class="card shadow-none mb-3"><div class="card-header bg-light card-collapse p-0" role="tab" id="heading' + counter + '" style="position: relative;">' +
            '<a role="button" class="btn btn-link btn-block link-dark text-decoration-none d-flex justify-content-between align-items-center text-start py-2 collapsed" data-bs-toggle="collapse" data-bs-parent="#accordion" href="#collapse' + counter + '" aria-expanded="true" aria-controls="collapse' + counter + '">' + counter + '. ' + fieldName + '<span class="accordion-arrow"><i class="fas fa-arrow-down small"></i></span></a>' +
            '<a class="btn btn-sm btn-icon me-1 permalink_text link-dark" href="javascript:;" onclick="generatePermalink(this, ' + counter + ')"  data-bs-toggle="tooltip" data-bs-placement="top" title="Copy Permalink"><i class="far fa-link btn-icon__inner"></i></a>' +
            '<a class="btn btn-sm btn-icon me-1 copy-button-position link-dark" href="javascript:;" onclick="generateMethodId(this, \'' + fieldName + '\')"  data-bs-toggle="tooltip" data-bs-placement="top" title="Copy Method Name"><i class="far fa-copy fa-fw"></i></a>' +
            '</div><div id="collapse' + counter + '" class="collapse writeContractFunction" role="tabpanel" aria-labelledby="heading' + counter + '"><div class="card-body">' + userDocs + '<form>' + outputFieldsWithName + '</form></div></div></div>';

        body.before(output);
        $('[data-bs-toggle="tooltip"]').tooltip();
    }

    var isCollapsed = true;

    function expandCollapseAll() {
        if (isCollapsed) {
            $('.collapse.writeContractFunction').collapse('show');
            isCollapsed = false;
            $('.expandCollapseAllButton').html('[Collapse All]');
        } else {
            $('.collapse.writeContractFunction').collapse('hide');
            isCollapsed = true;
            $('.expandCollapseAllButton').html('[Expand All]');
        }
    }


    function NewProxySection(body, address) {
        let section = '<p>Showing ABI for possible implementation <a href="/address/' + address + '#writeContract" target="_blank" >' + address + '</a></p><div class="panel-group acc-v1" id="impl' + address + '" role="tablist" aria-multiselectable="true"></div>';
        $("#footer").before(section);
        return $('#impl' + address);
    }

    function openModal() {
        var msg = 'Please take note that this is a beta version feature and is provided on an "as is" and "as available" basis. BaseScan does not give any warranties and will not be liable for any loss, direct or indirect through continued use of this feature.';
        if (confirm(msg)) {
            try {
                if (window.parent.document.URL.indexOf('writeProxyContract') != -1) {
                    window.parent.document.getElementById("readContractMessageProxy").classList.remove("d-flex");
                    parent.openProxyModal("writeproxycontractiframe");
                } else {
                    var isInIFrame = (window.location != window.parent.location);
                    if (isInIFrame) {
                        parent.openModal("writecontractiframe");
                        var parentIframe = window.parent.document.getElementById("writecontractiframe")
                        parentIframe.style.minHeight = '600px';
                        window.parent.document.getElementById("readContractMessage").classList.remove("d-flex");
                    } else {
                        $('#WalletModalProxyIframeNew').modal('show');
                    }
                }
            } catch (err) { }
        }
    }

    function closeModal() {
        try {
            if (window.parent.document.URL.indexOf('writeProxyContract') != -1) {
                parent.closeProxyModal();
            } else {
                var isInIFrame = (window.location != window.parent.location);
                if (isInIFrame) {
                    parent.closeModal();
                } else {
                    $('#WalletModalProxyIframeNew').modal('hide');
                }
            }
        } catch (err) { }
    }

    function write0(method, input, isSameNetwork) {

        // Re-check chain before write
        if (isSameNetwork == undefined || isSameNetwork === null || isSameNetwork == false) {
            if (typeof web3obj !== 'undefined') {

                (async () => {
                    let network = 0;
                    network = await web3obj.eth.net.getId();
                    //network = 'base';
                    let netId = network.toString();
                    //if (network.toLowerCase() !== net.toLowerCase()) {
                    if (netId !== strNetId) {
                        // Show message
                        $('.' + input).html("<span class='text-danger'>Wrong network detected, please make sure you are switched to the correct network, and try again</span>");
                    } else {
                        write0(method, input, true);
                    }
                })();

                return;
            }
        } else {

            if (isAccount === false) {
                alert("Please connect to your Web3 provider!");
                return;
            }

            $(".write-msg").empty();

            var functiontoCall = 'myContractInstance.methods[\'' + method + '\']';
            var params = [];
            //var ctrl = document.querySelectorAll("[name=" + input + "]");
            var ctrl = setupInputData(input); // setup tuple data
            var inputs = [];

            if (input.indexOf("_proxy") !== -1)
                functiontoCall = 'myProxyContractInstance.methods[\'' + method + '\']';

            for (var i = 0; i < ctrl.length; i++) {
                //var type = ctrl[i].getAttribute('data-bs-type');
                //var grp = ctrl[i].getAttribute('data-bs-grp');
                var type = ctrl[i].dataType;
                var grp = ctrl[i].dataGrp;
                var ktype = ctrl[i].kType;

                var values = [];

                if (ctrl[i].value == '' && grp === null) {
                    //document.getElementById(input).focus();
                    $(this).focus();
                    alert('Input value cannot be empty');
                    return false;
                }

                // don't trip formatting at all
                var value = ctrl[i].value;

                if (value) {
                    if (type.indexOf('[') !== -1 && type.indexOf(']') !== -1 && value.indexOf(',') !== -1) {
                        values.push(value.split(','));
                    } else {
                        values.push(value);
                    }
                } else values.push('');

                inputs.push({ type: type, value: values, grp: grp, ktype: ktype });
            }

            var params = encodeParams(inputs);
            //get input number - which is always the second element
            var splitTmp = input.split("_");
            var counter = splitTmp[1];
            var strMethod;
            if (method.toString().includes("(")) {
                strMethod = method.substring(0, method.lastIndexOf("("));
            } else {
                strMethod = method.toString();
            }
            
            var payableAmountInput = document.getElementById("input_payable_" + counter + '_' + strMethod);
            var payableParam = payableAmountInput && !isNaN(payableAmountInput.value) ? ', value: "' + web3obj.utils.toWei(payableAmountInput.value, "ether") + '"' : '';

            try {
                new Function(functiontoCall + "(" + params + ").send({ from:'" + web3obj.eth.defaultAccount + "'" + payableParam + ", maxPriorityFeePerGas: null, maxFeePerGas: null,})" +
                    ".on('transactionHash', function(hash) { showTx('', hash, '" + input + "'); })" +
                    ".on('error', function(error) { showTx(error, '', '" + input + "') });")();
            } catch (err) {
                showTx(err.message, '', input);
            }
        }
    }

    function setupInputData(input) {

        var newarray = [];
        var objData_kType; 
        var ctrl = document.querySelectorAll("[name=" + input + "]");
        for (var i = 0; i < ctrl.length; i++) {
            var object = {};
            if (i == 0) {
                objData_kType = ctrl[i].getAttribute('k-type');
            } else {
                objData_kType = objData_kType + ',' + ctrl[i].getAttribute('k-type');
            }
            object.id = ctrl[i].id;
            object.name = ctrl[i].name;
            object.value = ctrl[i].value;
            object.dataType = ctrl[i].getAttribute('data-bs-type');
            object.kType = objData_kType;
            object.dataGrp = ctrl[i].getAttribute('data-bs-grp');
            newarray.push(object);
        }

        var newCtrl = [];
        var tupleData = [];
        var newid = '';
        var oldid = '';
        for (var i = 0; i < newarray.length; i++) {
            newid = newarray[i].id;

            if (newid !== oldid && i > 0) {
                //reset tupleData
                tupleData = [];
            }

            var groupName = newarray[i].dataGrp;
            if (newarray[i].id.indexOf("tuple") !== -1 && newarray.length > 1 && newarray[i].dataType.indexOf('][') < 0) {
                tupleData.push(newarray[i].value);    
                newarray[i].value = JSON.stringify(tupleData);
                newCtrl.push(newarray[i]);
            } else if ((newarray[i].dataType.indexOf('][') < 0 && newarray[i].dataType.indexOf('[') !== -1) && groupName && groupName !== "" && newarray[i].dataType !== 'tuple[]') {
                // handle for group
                tupleData = []; //reset before enter the loop
                var index = 0;
                if (newarray.length > 1) {
                    for (var j = i; j < newarray.length; j++) {
                        groupName = newarray[j].dataGrp;
                        var oldGroupName = '';
                        if (j > 0) {
                            oldGroupName = newarray[j - 1].dataGrp;
                            if (!oldGroupName) {
                                oldGroupName = "";
                            }
                        }

                        if (oldGroupName == "" || groupName == oldGroupName || index == 0) {
                            //check string or address input eg input with "" or '' or without quote symbol
                            if (newarray[j].dataType.indexOf("string") !== -1 || newarray[j].dataType.indexOf("address") !== -1) {
                                newarray[j].value = newarray[j].value.trim();
                                //input start and end with single quote 
                                if (newarray[j].value.startsWith('\'') && newarray[j].value.endsWith('\'')) {
                                    newarray[j].value = '"' + newarray[j].value.substring(1, newarray[j].value.length - 1) + '"'
                                }
                                //input without quote front and back
                                if (!newarray[j].value.startsWith('"') && !newarray[j].value.endsWith('"')) {
                                    newarray[j].value = '"' + newarray[j].value + '"';
                                }
                            }

                            tupleData.push(newarray[j].value);
                            i = j;
                        } else {
                            j = newarray.length;
                        }
                        index = index + 1;
                    }

                    var dataArray = tupleData.toString();
                    if (dataArray.startsWith('[') && dataArray.endsWith(']')) {
                        newarray[i].value = tupleData.toString();
                    } else {
                        newarray[i].value = '[' + tupleData.toString() + ']';
                    }

                }

                newCtrl.push(newarray[i]);
                tupleData = []; //reset every after the loop
            }
            else {
                if (newarray[i].dataType == "address") {
                    //checksum here
                    try {
                        newarray[i].value = web3obj.utils.toChecksumAddress(newarray[i].value);
                    } catch {
                        newarray[i].value = newarray[i].value
                    }
                }

                newCtrl.push(newarray[i]);
            }
            oldid = newarray[i].id;
        }

        const removeDuplicate = Object.values(newCtrl.reduce((acc, cur) => {
            acc[cur.id] = cur;
            return acc;
        }, {}))

        return removeDuplicate;

    }

    function encodeParams(values) {
        var params = '';

        if (values.length === 0)
            return "";

        for (i = 0; i < values.length; i++) {
            var param = values[i];

            if (param.value !== '') {
                if (param.grp !== null) {
                    var _grp = values.filter(function (x) { return x.grp == param.grp });
                    var _grpParam = '';

                    for (g = 0; g < _grp.length; g++) {
                        param = _grp[g];

                        if (param.value[0] !== '') {
                            if (g == 0)
                                if (param.type.indexOf('tuple') !== -1) {
                                    _grpParam = param.value[0];
                                } else {
                                    _grpParam = toHex(param.type, Escape(param.value[0]));
                                }
                            else
                                if (param.type.indexOf('tuple') !== -1) {
                                    _grpParam = _grpParam + ',' + param.value[0];
                                } else {
                                    _grpParam = _grpParam + ',' + toHex(param.type, Escape(param.value[0]));
                                }
                        }
                    }

                    if (i == 0)
                        params += _grpParam;
                    else
                        params += ',' + _grpParam;
                    i += _grp.length - 1;
                }
                else {
                    if (i == 0)
                        //this is to handle sinlge tuple variable, the way to handle is pass in the struct and loop it. 
                        if (param.type.indexOf('tuple') !== -1) {
                            params = param.value[0];
                            const types = param.ktype.split(',');
                            // Iterate over the types and process each type-value pair
                            const hexValues = [];
                            const jarray = JSON.parse(params);
                            // Using a for loop instead
                            for (let index = 0; index < types.length; index++) {
                                const type = types[index];
                                const value = jarray[index];
                                const hexValue = toHex(type, Escape(value));
                                hexValues.push(hexValue);
                            }
                            params = '[' + hexValues.join(',') + ']';
                        } else {
                            params = toHex(param.type, Escape(param.value[0]));
                        }
                    else
                        if (param.type.indexOf('tuple') !== -1) {
                            const jarray = JSON.parse(Escape(param.value[0]));
                            try {
                                //directly parse to json array string, so able to avoid  no quote for string issue
                                //if fail stringify then catch use loop through each element to form param
                                for (let i = 0; i < jarray.length; i++) {
                                    // Only process if the element have quote at start and end
                                    if (typeof jarray[i] === 'string' && jarray[i].length > 1) {
                                        if ((jarray[i].startsWith('"') && jarray[i].endsWith('"')) || (jarray[i].startsWith("'") && jarray[i].endsWith("'"))) {
                                            jarray[i] = jarray[i].substring(1, jarray[i].length - 1)
                                        }
                                    }
                                }
                                var arrReturn = JSON.stringify(jarray);
                                params = params + ',' + arrReturn
                            } catch (e) {
                                // Loop through each element in the array
                                for (let i = 0; i < jarray.length; i++) {
                                    // Only process if the element is a string and has more than 1 character
                                    if (typeof jarray[i] === 'string' && jarray[i].length > 1) {
                                        // strip any existing double quotes or single quotes
                                        jarray[i] = jarray[i].replace("\"", "").replace("'", "");
                                        // needed to do it twice
                                        jarray[i] = jarray[i].replace("\"", "").replace("'", "");
                                        jarray[i] = "'" + jarray[i] + "'";
                                    }
                                }
                                params = params + ',' + '[' + jarray.join(',') + ']';
                            }
                        } else {
                            params = params + ',' + toHex(param.type, Escape(param.value[0]));
                        }
                }
            }
        }

        //here to handle if it is tuple array like tuple[2]
        if (values.length == 1) {
            if (values[0].type.indexOf('tuple[]') !== -1 && values[0].type.indexOf('tuple[][') == -1) {
                //do nothing
            }
            //here to handle if it is tuple array like tuple[2]
            else if (values[0].type.indexOf('tuple[') !== -1) {
                params = '[' + params + ']';
            }
        }

        return params;
    }


    function Escape(val) {

        if (typeof val === 'string' || val instanceof String) {
            //to avoid replaced single quote front and back
            if (val.startsWith("'") && val.endsWith("'")) {
                val = '"' + val.substring(1, val.length - 1) + '"'
            }
            return val.replace(/'/g, "\\u0027");
        }
        else {
            return val;
        }
    }

    function strip(val) {
        val = val.replace(/"/g, '');
        return val;
    }

    function toHex(type, val) {
        if (type.indexOf('bool') !== -1)
            if (type.indexOf('[') !== -1) {
                return val;
            } else {
                return JSON.parse(val);
            }
        else if (type.indexOf('address') !== -1)
            if (type.indexOf('[') !== -1) {
                // check for address[] - Convenience parsing to wrap with double quotes
                // multidimensional arrays will rely on the user providing the correct input (brackets, double quotes on the correct places)
                var tmp = val.toString().replace("[", "").replace("]", "").split(",");
                var toReturn = "";
                for (var i = 0; i < tmp.length; i++) {
                    if (tmp[i].length == 0)
                        toReturn = toReturn + " ," //let it error
                    else
                        toReturn = toReturn + "'" + add0xforAddress(tmp[i].toString().replace("\"", "").replace("'", "").replace("\"", "").replace("'", "")) + "',"
                }
                toReturn = toReturn.slice(0, -1);
                toReturn = "[" + toReturn + "]";
                return toReturn;
            } else {
                // strip any existing double quotes or single quotes
                val = val.replace("\"", "").replace("'", "");
                // needed to do it twice
                val = val.replace("\"", "").replace("'", "");
                return "'" + add0xforAddress(val) + "'";
            }
        else if (type.indexOf('string') !== -1)
            // which also means if you double quote your strings, it'll follow suit ;)
            if (type.indexOf('[') !== -1) {
                // check for address[] - Convenience parsing to wrap with double quotes
                // multidimensional arrays will rely on the user providing the correct input (brackets, double quotes on the correct places)
                var tmp = [];
                try {
                    var rawVal = val.toString();
                    var sinatizeArray = normalizeLooseArrayString(rawVal); //clean and normalize the losses array
                    tmp = JSON.parse(sinatizeArray); // check the return is correct array string
                    var arrReturn = JSON.stringify(tmp); //serialize the array for return
                    return arrReturn;
                } catch (e) {
                    tmp = val.toString().replace("[", "").replace("]", "").split(",");
                    var toReturn = "";
                    for (var i = 0; i < tmp.length; i++) {
                        if (tmp[i].length == 0)
                            toReturn = toReturn + " ," //let it error
                        else
                            toReturn = toReturn + "'" + tmp[i].toString().replace("\"", "").replace("'", "").replace("\"", "").replace("'", "") + "',"
                    }
                    toReturn = toReturn.slice(0, -1);
                    toReturn = "[" + toReturn + "]";
                    return toReturn;
                }
            } else {
                // strip any existing double quotes or single quotes
                val = val.replace("\"", "").replace("'", "");
                // needed to do it twice
                val = val.replace("\"", "").replace("'", "");
                return "'" + val + "'";
            }
        else if (type.indexOf('uint') !== -1 || type.indexOf('int') !== -1)
            if (type.indexOf('[') !== -1) {
                // check for uint[] - Convenience parsing to wrap with double quotes
                // multidimensional arrays will rely on the user providing the correct input (brackets, double quotes on the correct places), exit if it is
                if (type.split(/[[1-9]]/).length == 2) {
                    var tmp = val.toString().replace("[", "").replace("]", "").split(",");
                    var toReturn = "";

                    // specifically handle empty array
                    if (tmp.length == 1 && tmp[0].trim() == "") {
                        return "[]";
                    }

                    for (var i = 0; i < tmp.length; i++) {
                        var item = tmp[i].toString().trim();
                        toReturn += `"${item}",`;
                    }

                    toReturn = "[" + toReturn.slice(0, -1) + "]";
                    return toReturn;
                } else {
                    return val; // let user handle multidimensional
                }
            }
            else {
                // strip any existing double quotes or single quotes
                val = val.replace("\"", "").replace("'", "");
                // needed to do it twice
                val = val.replace("\"", "").replace("'", "");
                return "'" + val + "'";
            }
        else if (type.indexOf('byte') !== -1)
            if (type.indexOf('[') !== -1) {
                // multidimensional arrays will rely on the user providing the correct input (brackets, double quotes on the correct places), exit if it is
                if (type.split(/[[1-9]]/).length == 2) {
                    var tmp = val.toString().replace("[", "").replace("]", "").split(",");
                    var toReturn = "";

                    // specifically handle empty array
                    if (tmp.length == 1) {
                        if (tmp[0].toString() == "") {
                            return "[]";
                        }
                    }

                    for (var i = 0; i < tmp.length; i++) {
                        toReturn = toReturn + "'" + tmp[i].toString() + "',"
                    }
                    toReturn = toReturn.slice(0, -1);
                    toReturn = "[" + toReturn + "]";
                    return toReturn;
                } else {
                    // avoid handling complex data types, rely on user to enter them as appropriate - including quote wrapping
                    return val;
                }
            }
            else {
                // strip any existing double quotes or single quotes
                val = val.replace("\"", "").replace("'", "");
                // needed to do it twice
                val = val.replace("\"", "").replace("'", "");
                return "'" + val + "'";
            }
        else
            return val
    };

    function htmlEncode(value) {
        return $('<div/>').text(value).html();
    }

    function showTx(err, msg, input) {

        if (err) {
            var _err = err;
            if (err.message)
                _err = err.message;

            result = filterXSS(_err) 
            htmlEncoded = htmlEncode(result);

            $('.' + input).html("<span class='text-danger'>" + htmlEncoded + "</span>");
            var height = $('.' + input).closest(".card-body").height()
            var id = $('.' + input).closest('.writeContractFunction').prev().attr('id');

            var obj = window.parent.document.getElementById(contractframe);
            $(obj).height(($(obj).height() - cardHeightDict[id] + height) + "px");
            cardHeightDict[id] = height;

        } else {
            var _url = 'https://basescan.org';

            if (msg !== undefined)
                $('.' + input).html("<a class='btn btn-primary' href='" + _url + "/tx/" + msg + "' target='_blank'> View your transaction</a>");
        }
    }

    async function connectWeb3(type) {
        var cont = false;
        if ((contractAddress !== undefined) || (net !== undefined)) {
            if (type === 'web3') {
                var objProvider = await initweb3walletProvider("MetaMask");
                web3obj = objProvider.web3obj;
                provide = objProvider.provider;
                iseip6963 = objProvider.iseip6963;

                typeOfLogin = type;
            } else {
                // for walletConnect we need to preemptively close the modal
                closeModal();
                var wcChainId = parseInt(strNetId);
                switch (type) {
                    //case 'walletConnect_v2':
                    //    // is there a way for us to catch the qrmodal rejection and flush the object? TODO
                    //    try {
                    //        walletConnectObj_v2 = await initConnectWallet(wcChainId, strNetId, strRpcUrl);
                    //        web3obj = await connectConnectWallet(walletConnectObj_v2);

                    //        nonBrowserWallet = true;
                    //        typeOfLogin = type;
                    //        break;
                    //    } catch (err) {
                    //        alert('Failed to establish a connection to ' + type + '.');
                    //        var isInIFrame = (window.location != window.parent.location);
                    //        if (isInIFrame) {
                    //            var element = window.parent.document.getElementById("writecontractiframe");
                    //            element.style.removeProperty("min-height");
                    //        }
                    //        await resetPage();
                    //        return;
                    //    }

                    case 'walletConnect':
                    case 'walletLink':
                        try {
                            web3Modal = await initwalletLink(wcChainId, mainnetName, strExplorerUrl, strFavIcon);
                            web3obj = await connectWalletLink(type.toLowerCase(), web3Modal, wcChainId, acceptedChainId);
                            nonBrowserWallet = true;
                            typeOfLogin = type;

                            break;
                        } catch (err) {
                            alert('Failed to establish a connection to ' + type + '.');
                            var isInIFrame = (window.location != window.parent.location);
                            if (isInIFrame) {
                                var element = window.parent.document.getElementById("writecontractiframe");
                                element.style.removeProperty("min-height");
                            }
                            await resetPage();
                            return;
                        }
                    case 'walletConnect_reown':
                        try {
                            let nativeToken = getNativeChainTokenDetails(strNetId);
                            reownInitModal = await initReownConnect(strNetId, strRpcUrl, strSiteName, strExplorerUrl, strFavIcon, nativeToken.tokenTicker,
                                                                    nativeToken.tokenName, nativeToken.decimals);
                            web3obj = await getObjectReownConnect(reownInitModal);
                            nonBrowserWallet = true;
                            typeOfLogin = type;

                            break;
                        } catch (err) {
                            alert('Failed to establish a connection to ' + type + '.');
                            console.error(err);
                            await resetPage();
                            return;
                        }
                }
            }
        }
        if (typeof web3obj !== 'undefined') {

            var network = 0;
            network = await web3obj.eth.getChainId();//web3obj.eth.net.getId();
            netID = network.toString();

            if (netID != strNetId) {
                switchEthereumChainWithProvider(web3obj.currentProvider, acceptedChainId).then(() => {
                    if (nonBrowserWallet == true || iseip6963) {
                        getWeb3Accounts();
                    } else if (typeof parent.ethereum !== 'undefined') {
                        parent.ethereum.enable().then(function () {
                            getWeb3Accounts();
                        });
                    } else if (typeof ethereum !== 'undefined') {
                        ethereum.enable().then(function () {
                            getWeb3Accounts();
                        });
                    } else {
                        getWeb3Accounts();
                    }
                    parent.closeModal();
                }).catch((ex) => {
                    parent.closeModal();
                    if (ex && ex.code === 4902) {  // 4902: mean this chain still not add to MM
                        addEthereumChainWithProvider(acceptedChainId, mainnetName, strSymbol, strRpcUrl, strExplorerUrl, 18, web3obj.currentProvider).then(() => getWeb3Accounts());
                    }
                });

                //alert("Please connect your Web3 to " + net + ' network');
                return false;
            } else {
                if (nonBrowserWallet == true || iseip6963) {
                    getWeb3Accounts();
                } else if (typeof parent.ethereum !== 'undefined') {
                    parent.ethereum.enable().then(function () {
                        getWeb3Accounts();
                    });
                } else if (typeof ethereum !== 'undefined') {
                    ethereum.enable().then(function () {
                        getWeb3Accounts();
                    });
                } else {
                    getWeb3Accounts();
                }
            }

            setTimeout(function () {
                if (contractframe == "writeproxycontractiframe") {
                    window.parent.writeProxyContractLoaded = true;
                } else {
                    window.parent.writeContractLoaded = true;
                }

                var obj = window.parent.document.getElementById(contractframe);

                if (obj !== null) {
                    parent.resizeIframe(obj, 0);
                    window.parent.isFrameLoading = false;
                    window.parent.document.getElementById('overlayMain').style.display = 'none';
                }

            }, 50);

            closeModal();
        } else {
            alert('Unable to locate a compatible web3 browser!');
        }
    }

    async function getWeb3Accounts() {

        if (iseip6963) {
            var accounts = await getDetailsFromMetamaskWithProvider(provide);
            if (accounts != null) {
                parseAccount(accounts.account);
            } else {
                alert('Please connect to your Web3 provider!');
            }
        }
        else {
            web3obj.eth.getAccounts(function (err, accounts) {
                if (err) alert(err + '. Are you sure you are on a secure (SSL / HTTPS) connection?');

                if (accounts.length > 0) {
                    parseAccount(accounts[0]);
                } else {
                    alert('Please connect to your Web3 provider!');
                }
            });
        }
        

    }

    function parseAccount(address) {
        var isAddress = isInputAddress(web3obj, address);

         var strAddressHyperlink;
         if (net == 'mainnet' || net == 'base') {
             strAddressHyperlink = strExplorerUrl + "/address/" + address;
         } else {
             strAddressHyperlink = strExplorerUrl + "/address/" + address;
         }

        if (isAddress) {
            $('.write-btn').show();
            $('#connectWeb3').hide();
            web3obj.eth.defaultAccount = address;

            myContractInstance = new web3obj.eth.Contract(ABI, contractAddress);

            if (proxyABI)
                myProxyContractInstance = new web3obj.eth.Contract(proxyABI, contractAddress);

            $('#connector').removeClass("text-danger").addClass("text-success");
            $('#connector').attr('title', 'Connected');
            $('#connector').attr('data-bs-toggle-second', 'tooltip');
            $("[data-bs-toggle-second='tooltip']").tooltip();
            $('.write-btn').removeClass("disabled");

            var connectorID = document.getElementById('connectStatus');         
            connectorID.innerHTML = connectorID.innerHTML.replace("Connect to Web3", "Connected - " + typeOfLogin.charAt(0).toUpperCase() + typeOfLogin.slice(1) + ' [<u>' + address.substring(0, 6) + '....' + address.substring(address.length - 4) + '</u>]');
            connectorID.setAttribute('onclick', 'window.open("' + strAddressHyperlink + '","_blank"); return false;');
            connectorID.outerHTML = connectorID.outerHTML.replace("btn-secondary", "btn-primary");
            connectorID.removeAttribute('href');

            isAccount = true;

        }
    }

    function add0xforAddress(_address) {
        _address = _address.trim();
        if (_address.startsWith("0x") == false && _address.length == 40) {
            _address = "0x" + _address;
        }
        return _address;
    }

    function getUrlParameter(sParam) {
        var sPageURL = decodeURIComponent(window.location.search.substring(1)),
            sURLVariables = sPageURL.split('&'),
            sParameterName,
            i;

        for (i = 0; i < sURLVariables.length; i++) {
            sParameterName = sURLVariables[i].split('=');

            if (sParameterName[0] === sParam) {
                return sParameterName[1] === undefined ? true : sParameterName[1];
            }
        }
    }

    function generatePermalink(el, number) {
        try {
            var currentUrl = window.parent.location.href;
            let prefix = "";
            if (window.parent.location.href.indexOf("#writeProxyContract") > -1)
                prefix = "#writeProxyContract";
            if (window.parent.location.href.indexOf("#readProxyContract") > -1)
                prefix = "#readProxyContract";
            if (window.parent.location.href.indexOf("#writeContract") > -1)
                prefix = "#writeContract";
            if (window.parent.location.href.indexOf("#readContract") > -1)
                prefix = "#readContract";

            var baseUrl = currentUrl.split("#")[0] + prefix;
            baseUrl = baseUrl + "#F" + number;

            //copy to clipboard code
            var elem = document.createElement('textarea');
            elem.value = baseUrl;
            document.body.appendChild(elem);
            elem.select();
            document.execCommand('copy');
            document.body.removeChild(elem);

            //get i element and original image class
            changeCopyIcon(el, "Copied");

        } catch (err) {
        }
    }

    function generateMethodId(el, copyText) {
        try {
            if (copyText) {
                //copy to clipboard code
                var elem = document.createElement('textarea');
                elem.value = copyText;
                document.body.appendChild(elem);
                elem.select();
                document.execCommand('copy');
                document.body.removeChild(elem);
                //get i element and original image class
                changeCopyIcon(el, "Copied");
            }
        } catch (err) {
        }
    }

    function changeCopyIcon(el, tooltipText) {
        var iElem = $(el).children("i")[0];
        var oriImageClass = $(iElem).attr("class");
        var checkImageClass = 'fa fa-check btn-icon__inner'
        let toolTip = bootstrap.Tooltip.getInstance(el);
        var oriTooltip = toolTip._config.originalTitle

        toolTip._config.title = tooltipText;
        toolTip.setContent();
        toolTip.update();
        $(iElem).removeClass(oriImageClass).addClass(checkImageClass);

        setTimeout(function () {
            toolTip._config.title = oriTooltip;
            $(iElem).removeClass(checkImageClass).addClass(oriImageClass);
        }, 1000);
    }

    setTimeout(function () {
        if (contractframe == "writeproxycontractiframe") {
            window.parent.writeProxyContractLoaded = true;
        } else {
            window.parent.writeContractLoaded = true;
        }
        var obj = window.parent.document.getElementById(contractframe);

        if (obj !== null) {
            //parent.resizeIframe(obj, 0);
            window.parent.isFrameLoading = false;
            window.parent.document.getElementById('overlayMain').style.display = 'none';
        }

    }, 50);

    function getParameterByName(name) {
        var url = window.location.href;
        name = name.replace(/[\[\]]/g, "\\$&");
        var regex = new RegExp("[?&]" + name + "(=([^&#]*)|&|#|$)"),
            results = regex.exec(url);
        if (!results) return null;
        if (!results[2]) return '';
        return decodeURIComponent(results[2].replace(/\+/g, " "));
    }

    $(document).ready(function () {
        $("body").tooltip({ selector: '[data-bs-toggle=tooltip]' });

        $(window).keydown(function (event) {
            if (event.keyCode == 13) {
                event.preventDefault();
                return false;
            }
        });

        $("#txtCustom").keypress(function (e) {
            //if the letter is not digit then don't type anything
            if (e.which != 8 && e.which != 0 && (e.which < 48 || e.which > 57)) {
                return false;
            }

            if ($("#txtCustom").val().length == 2) {
                return false;
            }
        });

        ListenProviderList();
    });

    function getCookie(cname) {
        var name = cname + "=";
        var ca = document.cookie.split(';');
        for (var i = 0; i < ca.length; i++) {
            var c = ca[i];
            while (c.charAt(0) === ' ') {
                c = c.substring(1);
            }
            if (c.indexOf(name) === 0) {
                return c.substring(name.length, c.length);
            }
        }
        return "";
    }

    var themeMode = localStorage.getItem('theme');
    if (themeMode === null) {
        themeMode = 'light';
    }

    var cThemeMode = getCookie('displaymode');

    (function () {
        if (cThemeMode === 'light' || themeMode === 'light') {
            document.documentElement.setAttribute('data-bs-theme', 'light');
        } else if (cThemeMode === 'dim' || themeMode === 'dim') {
            document.documentElement.setAttribute('data-bs-theme', 'dim');
        } else if (cThemeMode === 'dark' || themeMode === 'dark') {
            document.documentElement.setAttribute('data-bs-theme', 'dark');
        }
    })();

    function normalizeLooseArrayString(input) {
        //Make sure is string and trim outer
        var s = String(input || "").trim();
        //If the string already has surrounding [ ... ], remove it
        if (s.charAt(0) === "[" && s.charAt(s.length - 1) === "]") {
            s = s.substring(1, s.length - 1);
        }
        var parts = [];
        var buf = "";
        var inQuote = false;  // is it inside a quoted string?
        var q = ""; // quote char started the string with (' or ")
        var esc = false; // previous char was a \
        //loop check the characters
        for (var i = 0; i < s.length; i++) {
            var ch = s[i];
            if (inQuote) {
                if (esc) { buf += ch; esc = false; continue; }
                if (ch === "\\") { esc = true; continue; }
                if (ch === q) {
                    // Look ahead to the next non-space char
                    var k = i + 1; while (k < s.length && /\s/.test(s[k])) k++;
                    var nxt = k < s.length ? s[k] : "";
                    // If the next significant char is a comma, a closing bracket, or end of input,
                    // then this quote closes the string
                    if (nxt === "," || nxt === "]" || nxt === "") {
                        parts.push(buf.trim()); buf = ""; inQuote = false; q = ""; i = k - 1; continue;
                    } else { buf += ch; continue; }
                }
                buf += ch; continue;
            }
            if (ch === '"' || ch === "'") { inQuote = true; q = ch; continue; }  // Opening quote? Enter quoted mode and remember which quote char it was
            if (ch === ",") { if (buf.trim()) parts.push(buf.trim()); buf = ""; continue; } // Comma outside quotes means
            if (ch === "[" || ch === "]") continue; // Ignore stray brackets in the inner content (we already stripped outer ones)
            buf += ch;
        }
        //Push the final token if present
        if (buf.trim()) parts.push(buf.trim());
        // Build valid JSON
        for (var j = 0; j < parts.length; j++) {
            var t = parts[j];
            if (t.length >= 2 &&
                ((t[0] === "'" && t[t.length - 1] === "'") ||
                    (t[0] === '"' && t[t.length - 1] === '"'))) {
                t = t.substring(1, t.length - 1).trim();
            }
            // Replace token with a proper JSON string literal
            // Escape backslashes and double quotes to make valid JSON string content
            parts[j] = '"' + t.replace(/\\/g, "\\\\").replace(/"/g, '\\"') + '"';
        }
        //Join the cleaned string literals with commas and wrap in [ ... ]
        return "[" + parts.join(",") + "]";
    }
</script><div role="log" aria-live="assertive" aria-relevant="additions" class="ui-helper-hidden-accessible"></div><div role="log" aria-live="assertive" aria-relevant="additions" class="ui-helper-hidden-accessible"></div><div role="log" aria-live="assertive" aria-relevant="additions" class="ui-helper-hidden-accessible"></div><div role="log" aria-live="assertive" aria-relevant="additions" class="ui-helper-hidden-accessible"></div><div role="log" aria-live="assertive" aria-relevant="additions" class="ui-helper-hidden-accessible"></div><div role="log" aria-live="assertive" aria-relevant="additions" class="ui-helper-hidden-accessible"></div><div role="log" aria-live="assertive" aria-relevant="additions" class="ui-helper-hidden-accessible"></div><div role="log" aria-live="assertive" aria-relevant="additions" class="ui-helper-hidden-accessible"></div><div role="log" aria-live="assertive" aria-relevant="additions" class="ui-helper-hidden-accessible"></div><div role="log" aria-live="assertive" aria-relevant="additions" class="ui-helper-hidden-accessible"></div><div role="log" aria-live="assertive" aria-relevant="additions" class="ui-helper-hidden-accessible"></div><div role="log" aria-live="assertive" aria-relevant="additions" class="ui-helper-hidden-accessible"></div><div role="log" aria-live="assertive" aria-relevant="additions" class="ui-helper-hidden-accessible"></div><div role="log" aria-live="assertive" aria-relevant="additions" class="ui-helper-hidden-accessible"></div><div role="log" aria-live="assertive" aria-relevant="additions" class="ui-helper-hidden-accessible"></div><div role="log" aria-live="assertive" aria-relevant="additions" class="ui-helper-hidden-accessible"></div><div role="log" aria-live="assertive" aria-relevant="additions" class="ui-helper-hidden-accessible"></div><div role="log" aria-live="assertive" aria-relevant="additions" class="ui-helper-hidden-accessible"></div><div role="log" aria-live="assertive" aria-relevant="additions" class="ui-helper-hidden-accessible"></div><div role="log" aria-live="assertive" aria-relevant="additions" class="ui-helper-hidden-accessible"></div><div role="log" aria-live="assertive" aria-relevant="additions" class="ui-helper-hidden-accessible"></div><div role="log" aria-live="assertive" aria-relevant="additions" class="ui-helper-hidden-accessible"></div><div role="log" aria-live="assertive" aria-relevant="additions" class="ui-helper-hidden-accessible"></div><div role="log" aria-live="assertive" aria-relevant="additions" class="ui-helper-hidden-accessible"></div><div role="log" aria-live="assertive" aria-relevant="additions" class="ui-helper-hidden-accessible"></div><div role="log" aria-live="assertive" aria-relevant="additions" class="ui-helper-hidden-accessible"></div><div role="log" aria-live="assertive" aria-relevant="additions" class="ui-helper-hidden-accessible"></div><div role="log" aria-live="assertive" aria-relevant="additions" class="ui-helper-hidden-accessible"></div><div role="log" aria-live="assertive" aria-relevant="additions" class="ui-helper-hidden-accessible"></div><div role="log" aria-live="assertive" aria-relevant="additions" class="ui-helper-hidden-accessible"></div>


</body></html>